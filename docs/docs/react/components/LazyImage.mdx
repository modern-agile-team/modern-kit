import { LazyImage } from '@modern-kit/react';

# LazyImage

**[useIntersectionObserver](https://modern-agile-team.github.io/modern-kit/docs/react/hooks/useIntersectionObserver)**ë¥¼ í™œìš©í•´ `Viewport`ì— ë…¸ì¶œë  ë•Œ í• ë‹¹ëœ ì´ë¯¸ì§€ë¥¼ `Lazy Loading` í•˜ëŠ” ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

`width`, `height` ê°’ì„ ì…ë ¥í•´ ì´ë¯¸ì§€ì˜ í¬ê¸°ë¥¼ ì¡°ì ˆ í•  ìˆ˜ ìˆìœ¼ë©°, ë™ì‹œì— `Layout Shift`ë¥¼ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Intersection Observer Optionì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(í•˜ë‹¨ `Note` ì°¸ê³ )

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/components/LazyImage/index.tsx)

## Interface
```ts title="typescript"
interface IntersectionObserverInit {
  root?: Element | Document | null;
  rootMargin?: string;
  threshold?: number | number[];
}

interface LazyImageProps
  extends React.ComponentProps<'img'>,
    IntersectionObserverInit {
  src: string;
}

const LazyImage: React.ForwardRefExoticComponent<
  Omit<LazyImageProps, 'ref'> & React.RefAttributes<HTMLImageElement>
>;
```

## Usage
### Default
```tsx title="typescript"
import { LazyImage } from '@modern-kit/react';
import img1 from '../assets/img1.png';
import img2 from '../assets/img2.png';

const Example = () => {
  return (
    <div>
      {/* ... */}
      <LazyImage width={400} height={400} src={img1} alt="img1" />
      {/* ... */}
      <LazyImage width={400} height={400} src={img2} alt="img2" />
      {/* ... */}
    </div>
  );
}; 
```

<br />

### Fallback
```tsx title="typescript"
import { LazyImage } from '@modern-kit/react';
import img1 from '../assets/img1.png';

const Example = () => {
  const [isLoaded, setIsLoaded] = useState(false);

  const wrapperStyle: CSSProperties = {
    position: 'relative',
    width: '400px',
    height: '400px',
  };

  const imgStyle: CSSProperties = {
    position: 'absolute',
    top: 0,
    left: 0,
    opacity: isLoaded ? 1 : 0,
    transition: 'opacity 0.2s',
  };

  const skeletonStyle: CSSProperties = {
    width: '400px',
    height: '400px',
    backgroundColor: '#cdcbcb',
  };

  return (
    <div style={wrapperStyle}>
      {!isLoaded && <div style={skeletonStyle} />}
      <LazyImage
        style={imgStyle}
        width={400}
        height={400}
        src={img1}
        alt="img1"
        onLoad={() => setIsLoaded(true)}
      />
    </div>
  );
};
```

## Example

export const Example = () => {
  return (
    <div style={{ background: '#f8f8f8' }}>
      <div
        style={{
          height: '500px',
          textAlign: 'center',
          fontSize: '2rem',
        }}>
        ìŠ¤í¬ë¡¤ í•´ì£¼ì„¸ìš”.
      </div>
      <LazyImage
        width={'100%'}
        height={400}
        src={
          'https://github.com/Team-Grace/devgrace/assets/64779472/b5640bec-2abc-4205-afbf-ccfd9876a90b'
        }
        alt="img1"
        onClick={() => console.log('img click1')}
      />

      <div style={{ width: '100%', height: '150px' }} />

      <LazyImage
        width={'100%'}
        height={400}
        src={
          'https://github.com/Team-Grace/devgrace/assets/64779472/207743a7-b29f-4826-bc08-8df0d67e568b'
        }
        alt="img2"
        onClick={() => console.log('img click2')}
      />

      <div style={{ width: '100%', height: '150px' }} />

      <LazyImage
        width={'100%'}
        height={400}
        src={
          'https://github.com/Team-Grace/devgrace/assets/64779472/d1957ec8-fe87-406e-bfda-fb4ee505b152'
        }
        alt="img3"
        onClick={() => console.log('img click3')}
      />
    </div>
  );
};

<Example />


## Note
- [Intersection Observer API](https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver)