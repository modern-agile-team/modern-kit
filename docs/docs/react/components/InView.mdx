import { InView } from '@modern-kit/react';

# InView

`InView`ëŠ” `IntersectionObserver`ë¥¼ ì„ ì–¸ì ìœ¼ë¡œ í™œìš© í•  ìˆ˜ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

- `@modern-kit/react`ì˜ **[useIntersectionObserver](https://modern-agile-team.github.io/modern-kit/docs/react/hooks/useIntersectionObserver)** í›…ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.

ê´€ì°° ëŒ€ìƒì´ `Viewport`ì— ë…¸ì¶œë  ë•Œ(`onIntersectStart`) í˜¹ì€ ë‚˜ê°ˆ ë•Œ(`onIntersectEnd`) íŠ¹ì • action í•¨ìˆ˜ë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

<br />

### ë‹¤í˜•ì„±(polymorphism)
`InView` ì»´í¬ë„ŒíŠ¸ëŠ” `ë‹¤í˜•ì„±`ì„ ìœ„í•´ `as` ì†ì„±ì„ ì§€ì›í•©ë‹ˆë‹¤.

- ê¸°ë³¸ì ìœ¼ë¡œ `div` íƒœê·¸ë¡œ ìì‹ ìš”ì†Œë¥¼ ê°ì‹¸ì„œ ë Œë”ë§í•˜ë©°, `as` ì†ì„±ì„ í†µí•´ ê°ì‹¸ëŠ” ìš”ì†Œë¥¼ íŠ¹ì • ìš”ì†Œë¡œ ë³€ê²½í•´ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ë•Œ, í•´ë‹¹ ìš”ì†Œê°€ `IntersectionObserver`ì˜ ê´€ì°° ëŒ€ìƒì´ ë©ë‹ˆë‹¤.

### ì»´í¬ë„ŒíŠ¸ í•©ì„±(Composition)
`InView` ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ í•©ì„±ì„ ìœ„í•´ `asChild` ì†ì„±ì„ ì§€ì›í•©ë‹ˆë‹¤.

- `asChild` ì†ì„±ì´ `true`ë¼ë©´ **[Slot](https://modern-agile-team.github.io/modern-kit/docs/react/components/Slot)** ì„ í†µí•´ ë˜í¼ ìš”ì†Œ ì—†ì´ ìì‹ ìš”ì†Œë¥¼ ê·¸ëŒ€ë¡œ ë Œë”ë§í•©ë‹ˆë‹¤. 
- ì´ë•Œ, í•´ë‹¹ ìì‹ ìš”ì†Œê°€ `IntersectionObserver`ì˜ ê´€ì°° ëŒ€ìƒì´ ë©ë‹ˆë‹¤.
  - Slotì˜ ìì‹ì€ `ë‹¨ì¼ ìš”ì†Œ`ë§Œ í—ˆìš©ë©ë‹ˆë‹¤.
  - Slotì€ ìì‹ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ì˜¬ ê²½ìš° `forwardRef`, `props`ë¥¼ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤. í—ˆìš©í•˜ì§€ ì•Šìœ¼ë©´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  - `asChild` ì†ì„±ì„ ì‚¬ìš© í•  ê²½ìš° **[Slot](https://modern-agile-team.github.io/modern-kit/docs/react/components/Slot)** ë¬¸ì„œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.


<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/components/InView/index.tsx)

## Interface
```ts title="typescript"
interface InViewProps extends UseIntersectionObserverProps {
  children: React.ReactNode;
  asChild?: boolean;
}
```
```ts title="typescript"
const InView: PolyForwardComponent<"div", InViewProps, React.ElementType>
```

## Usage
### Default
- ê¸°ë³¸ì ìœ¼ë¡œ `div`ë¡œ ê°ì‹¸ì§€ë©°, í•´ë‹¹ `div`ê°€ `IntersectionObserver`ì˜ ê´€ì°° ëŒ€ìƒì´ ë©ë‹ˆë‹¤.
- í•´ë‹¹ `div`ê°€ viewportì— ë…¸ì¶œë˜ê±°ë‚˜ ìˆ¨ê²¨ì§ˆ ë•Œ `onIntersectStart/onIntersectEnd` ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
```tsx title="typescript"
import { InView } from '@modern-kit/react';

const Example = () => {
  const handleIntersectStart = () => {/* action */}
  const handleIntersectEnd = () => {/* action */}

  return (
    <InView onIntersectStart={handleIntersectStart} onIntersectEnd={handleIntersectEnd}>
      <div>Box1</div>
    </InView>
  );
}; 
```

### as
- `as` ì†ì„±ì„ í†µí•´ íŠ¹ì • ìš”ì†Œë¡œ ë Œë”ë§í•  ìˆ˜ ìˆìœ¼ë©°, í•´ë‹¹ ìš”ì†Œê°€ `IntersectionObserver`ì˜ ê´€ì°° ëŒ€ìƒì´ ë©ë‹ˆë‹¤.
- í•´ë‹¹ ìš”ì†Œê°€ viewportì— ë…¸ì¶œë˜ê±°ë‚˜ ìˆ¨ê²¨ì§ˆ ë•Œ `onIntersectStart/onIntersectEnd` ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
```tsx title="typescript"
import { InView } from '@modern-kit/react';

const Example = () => {
  const handleIntersectStart = () => {/* action */}
  const handleIntersectEnd = () => {/* action */}

  return (
    <InView
      as='ul' // divê°€ ì•„ë‹Œ ul ìš”ì†Œë¡œ ê°ì‹¸ ë Œë”ë§
      onIntersectStart={handleIntersectStart}
      onIntersectEnd={handleIntersectEnd}
    >
      <li>List Item1</li>
      <li>List Item2</li> 
    </InView>
  );
}; 
```

### asChild
- `asChild` ì†ì„±ì´ `true`ë¼ë©´ **[Slot](https://modern-agile-team.github.io/modern-kit/docs/react/components/Slot)** ì„ í†µí•´ ë˜í¼ ìš”ì†Œ ì—†ì´ ìì‹ ìš”ì†Œë¥¼ ê·¸ëŒ€ë¡œ ë Œë”ë§í•˜ê³ , í•´ë‹¹ ìì‹ ìš”ì†Œê°€ `IntersectionObserver`ì˜ ê´€ì°° ëŒ€ìƒì´ ë©ë‹ˆë‹¤.
- ìì‹ ìš”ì†Œê°€ viewportì— ë…¸ì¶œë˜ê±°ë‚˜ ìˆ¨ê²¨ì§ˆ ë•Œ `onIntersectStart/onIntersectEnd` ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
```tsx title="typescript"
import { InView } from '@modern-kit/react';

const Example = () => {
  const handleIntersectStart = () => {/* action */}
  const handleIntersectEnd = () => {/* action */}

  return (
    <InView asChild onIntersectStart={handleIntersectStart} onIntersectEnd={handleIntersectEnd}>
      <div>Box1</div>
    </InView>
  );
}; 
```

## Example

export const Example = () => {
  const inViewStyle = {
    width: '100%',
    color: 'white',
    textAlign: 'center',
    fontSize: '21px',
    padding: '0 20px',
  }
  return (
    <div>
      <div
        style={{
          height: '500px',
          textAlign: 'center',
          fontSize: '1.7rem',
        }}>
        <p>ìŠ¤í¬ë¡¤ í•´ì£¼ì„¸ìš”.</p>
        <p>ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì˜ ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
      </div>

      <InView
        onIntersectStart={() => console.log('action onIntersectStart(1)')}
        onIntersectEnd={() => console.log('action onIntersectEnd(1)')}
        style={{ ...inViewStyle, background: '#c0392B' }}
        calledOnce
      >
        <p>Box1</p>
        <p>calledOnce: true</p>
        <p>as: div</p>
      </InView>
      <div style={{ height: '300px' }} />
      <InView
        onIntersectStart={() => console.log('action onIntersectStart(2)')}
        onIntersectEnd={() => console.log('action onIntersectEnd(2)')}
        style={{ ...inViewStyle, background: '#89a5ea' }}
      >
        <li>Box2</li>
        <li>calledOnce: false</li>
        <li>as: ul</li>
      </InView>
      <div style={{ height: '300px' }} />
      <InView
        asChild
        onIntersectStart={() => console.log('action onIntersectStart(3)')}
        onIntersectEnd={() => console.log('action onIntersectEnd(3)')}
        style={{ ...inViewStyle, background: '#77DD77' }}
      >
        <div>
          <p>Box3</p>
          <p>calledOnce: false</p>
          <p>asChild: true</p>
        </div>
      </InView>
      <div style={{ width: '100%', height: '500px', textAlign: 'center' }} />
    </div>
  );
};

<Example />

## Note
- [Intersection Observer API](https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver)