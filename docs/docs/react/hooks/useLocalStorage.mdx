import { useLocalStorage } from '@modern-kit/react';

# useLocalStorage

`React v18`ë¶€í„° ì§€ì›í•˜ëŠ” **[useSyncExternalStore](https://react.dev/reference/react/useSyncExternalStore)** ì„ í™œìš©í•´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë‚´ì˜ íŠ¹ì • `key` ë°ì´í„°ë¥¼ êµ¬ë…í•˜ê³ , êµ¬ë… ì¤‘ì¸ ë°ì´í„°ì— ë³€í™”ê°€ ìˆì„ ì‹œ ì´ë¥¼ ë™ê¸°í™”í•´ì£¼ëŠ” ì»¤ìŠ¤í…€ í›…ì…ë‹ˆë‹¤.

ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— êµ¬ë…í•˜ê³ ì í•˜ëŠ” `key`ê°€ ì—†ì„ ê²½ìš° ë°˜í™˜í•  `initialValue`ë¡œ ì´ˆê¸°ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, `ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(SSR)`ì˜ ê²½ìš° ë¡œì»¬ìŠ¤í† ë¦¬ì§€ê°€ ë™ì‘í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— `initialValue`ê°€ ë°˜í™˜ë©ë‹ˆë‹¤.

`setState`ëŠ” ê°’ ìì²´ë¥¼ ë„˜ê¸¸ ìˆ˜ ìˆìœ¼ë©°, í•¨ìˆ˜ë„ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•¨ìˆ˜ë¡œ í™œìš© ì‹œì— ì¸ìë¡œ state ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
const { state, setState, removeState } = useLocalStorage<number[]>({
  key: 'test',
  initialValue: [1, 2],
});

setState([1, 2, 3]);
setState(state => [...state, 3]);
```

<br />

initialValueë¥¼ ë„˜ê²¨ì£¼ë©´ ë”ìš± `ëª…í™•í•œ íƒ€ì… ì¶”ë¡ `ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```ts
const { state, setState } = useLocalStorage<number[]>({
  key: 'test',
});

state; // number[] | null
setState(state => {
  state; // number[] | null
});
```

```ts
const { state, setState } = useLocalStorage<number[]>({
  key: 'test',
  initialValue: [],
});

state; // number[]
setState(state => {
  state; // number[]
});
```

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useLocalStorage/index.ts)

## Interface
```ts title="typescript"
interface UseLocalStorageOptionalInitialValueProps<T> {
  key: string;
  initialValue?: T | (() => T) | null;
}

interface UseLocalStorageRequiredInitialValueProps<T> {
  key: string;
  initialValue: T | (() => T);
}
```
```ts
// í•¨ìˆ˜ ì˜¤ë²„ë¡œë”©
// initialValue ì¡´ì¬í•˜ë©´ state íƒ€ì…ì— null ì œì™¸
function useLocalStorage<T>({
  key,
  initialValue,
}: UseLocalStorageRequiredInitialValueProps<T>): {
  readonly state: T;
  readonly setState: (value: T | ((state: T) => T)) => void;
  readonly removeState: () => void;
};

// initialValue ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ state íƒ€ì…ì— null í¬í•¨
function useLocalStorage<T>({
  key,
  initialValue,
}: UseLocalStorageOptionalInitialValueProps<T>): {
  readonly state: T | null;
  readonly setState: (value: T | ((state: T | null) => T)) => void;
  readonly removeState: () => void;
};
```

## Usage
```tsx title="typescript"
import { useLocalStorage } from '@modern-kit/react';

const Example = () => {
  const { state, setState, removeState } = useLocalStorage<string>({
    key: 'test',
    initialValue: 'default',
  });

  return (
    <div>
      <p>ê°œë°œì ë„êµ¬ì—ì„œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!</p>
      <p>state: {state}</p>
      <button onClick={() => setState('foo')}>
        {`ë¡œì»¬ìŠ¤í† ë¦¬ì§€ "test"keyì— "foo"ë°ì´í„° ì €ì¥`}
      </button>
      <button onClick={() => setState('bar')}>
        {`ë¡œì»¬ìŠ¤í† ë¦¬ì§€ "test"keyì— "bar"ë°ì´í„° ì €ì¥`}
      </button>
      <button onClick={() => removeState()}>
        {`ë¡œì»¬ìŠ¤í† ë¦¬ì§€ "test"key ì œê±°`}
      </button>
    </div>
  );
};
```

## Example

export const Example = () => {
  const { state, setState, removeState } = useLocalStorage({
    key: 'test',
    initialValue: 'default',
  });

  return (
    <div>
      <p>ê°œë°œì ë„êµ¬ì—ì„œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!</p>
      <p>state: {state}</p>
      <button onClick={() => setState('foo')}>
        {`ë¡œì»¬ìŠ¤í† ë¦¬ì§€ "test"keyì— "foo"ë°ì´í„° ì €ì¥`}
      </button>
      <button onClick={() => setState('bar')}>
        {`ë¡œì»¬ìŠ¤í† ë¦¬ì§€ "test"keyì— "bar"ë°ì´í„° ì €ì¥`}
      </button>
      <button onClick={() => removeState()}>
        {`ë¡œì»¬ìŠ¤í† ë¦¬ì§€ "test"key ì œê±°`}
      </button>
    </div>
  );
};


<Example />