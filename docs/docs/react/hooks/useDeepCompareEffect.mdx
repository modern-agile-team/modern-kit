import { useDeepCompareEffect } from '@modern-kit/react'
import { useState, useEffect } from 'react'

# useDeepCompareEffect

ì˜ì¡´ì„± ë°°ì—´ì„ `ê¹Šì€ ë¹„êµ(deep comparison)`ë¥¼ í†µí•´ íŒë‹¨í•˜ì—¬ effectë¥¼ ì‹¤í–‰í•˜ëŠ” ì»¤ìŠ¤í…€ í›…ì…ë‹ˆë‹¤.

Reactì˜ ê¸°ë³¸ `useEffect`ëŠ” ì˜ì¡´ì„± ë°°ì—´ì„ ì–•ì€ ë¹„êµ(`shallow comparison`)ë¡œ ê²€ì‚¬í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ë‚˜ ë°°ì—´ì˜ ì°¸ì¡°ê°€ ë³€ê²½ë˜ë©´ ë‚´ìš©ì´ ê°™ì•„ë„ effectê°€ ì¬ì‹¤í–‰ë©ë‹ˆë‹¤. 

`useDeepCompareEffect`ëŠ” ê¹Šì€ ë¹„êµë¥¼ ìˆ˜í–‰í•˜ì—¬ ì‹¤ì œ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œë§Œ effectë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

:::caution
âš ï¸ ê¹Šì€ ë¹„êµë¥¼ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ ì‚¬ìš© ì‹œ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë³µì¡í•œ ê°ì²´ë‚˜ í° ë°°ì—´ì—ëŠ” ì‚¬ìš©ì„ ì§€ì–‘í•˜ì„¸ìš”.
:::

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useDeepCompareEffect/index.ts)

## Interface
```ts title="typescript"
function useDeepCompareEffect(
  effectCallback: EffectCallback,
  deps: DependencyList
): void
```

## Usage
```tsx title="typescript"
import { useDeepCompareEffect } from '@modern-kit/react'

const Example = () => {
  const [user, setUser] = useState({ name: 'John', age: 30 });

  // ì¼ë°˜ useEffectëŠ” ê°ì²´ ì°¸ì¡°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤
  useEffect(() => {
    console.log('useEffect ì‹¤í–‰');
  }, [user]);

  // useDeepCompareEffectëŠ” ê°ì²´ì˜ ì‹¤ì œ ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤
  useDeepCompareEffect(() => {
    console.log('useDeepCompareEffect ì‹¤í–‰: ê°’ì´ ì‹¤ì œë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤');
  }, [user]);

  return (
    <div>
      <p>Name: {user.name}, Age: {user.age}</p>
      <button onClick={() => setUser({ name: 'John', age: 30 })}>
        Johnìœ¼ë¡œ ì—…ë°ì´íŠ¸
      </button>
      <button onClick={() => setUser({ name: 'Jane', age: 25 })}>
        Janeìœ¼ë¡œ ì—…ë°ì´íŠ¸
      </button>
      <button onClick={() => setUser({ name: 'Bob', age: 35 })}>
        Bobìœ¼ë¡œ ì—…ë°ì´íŠ¸
      </button>
      <div>
        <p>useEffect ì‹¤í–‰ íšŸìˆ˜: {effectCount}íšŒ</p>
        <p>useDeepCompareEffect ì‹¤í–‰ íšŸìˆ˜: {deepEffectCount}íšŒ</p>
      </div>
    </div>
  );
}
```

## Example

export const Example = () => {
  const [user, setUser] = useState({ name: 'John', age: 30 });
  const [effectCount, setEffectCount] = useState(0);
  const [deepEffectCount, setDeepEffectCount] = useState(0);

  // ì¼ë°˜ useEffect - ê°ì²´ ì°¸ì¡°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì‹¤í–‰
  useEffect(() => {
    setEffectCount(prev => prev + 1);
  }, [user]);

  // useDeepCompareEffect - ê°ì²´ì˜ ì‹¤ì œ ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰
  useDeepCompareEffect(() => {
    setDeepEffectCount(prev => prev + 1);
  }, [user]);

  return (
    <div>
      <div style={{ marginBottom: '20px' }}>
        <p><strong>í˜„ì¬ ì‚¬ìš©ì:</strong> {user.name}, {user.age}ì„¸</p>
      </div>
      <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>
        <button onClick={() => setUser({ name: 'John', age: 30 })}>
          Johnìœ¼ë¡œ ì—…ë°ì´íŠ¸
        </button>
        <button onClick={() => setUser({ name: 'Jane', age: 25 })}>
          Janeìœ¼ë¡œ ì—…ë°ì´íŠ¸
        </button>
        <button onClick={() => setUser({ name: 'Bob', age: 35 })}>
          Bobìœ¼ë¡œ ì—…ë°ì´íŠ¸
        </button>
      </div>
      <div style={{ padding: '15px', backgroundColor: '#f5f5f5', borderRadius: '4px' }}>
        <p style={{ fontSize: '14px', margin: '5px 0' }}>
          <strong>useEffect ì‹¤í–‰ íšŸìˆ˜:</strong> {effectCount}íšŒ 
          <span style={{ color: '#666', fontSize: '12px' }}> (ê°ì²´ ì°¸ì¡°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤)</span>
        </p>
        <p style={{ fontSize: '14px', margin: '5px 0' }}>
          <strong>useDeepCompareEffect ì‹¤í–‰ íšŸìˆ˜:</strong> {deepEffectCount}íšŒ 
          <span style={{ color: '#666', fontSize: '12px' }}> (ì‹¤ì œ ê°’ì´ ë³€ê²½ë  ë•Œë§Œ)</span>
        </p>
        <p style={{ fontSize: '12px', color: '#0066cc', marginTop: '10px' }}>
          ğŸ’¡ "ê°™ì€ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ useEffectëŠ” ì‹¤í–‰ë˜ì§€ë§Œ, useDeepCompareEffectëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        </p>
      </div>
    </div>
  );
}

<Example />

