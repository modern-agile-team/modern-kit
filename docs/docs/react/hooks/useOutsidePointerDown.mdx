import { useMemo, useState, useRef } from 'react';
import { useOutsidePointerDown } from '@modern-kit/react';
import BrowserOnly from '@docusaurus/BrowserOnly';

# useOutsidePointerDown

íŠ¹ì • ìš”ì†Œ ì™¸ë¶€ì—ì„œ ë§ˆìš°ìŠ¤ ë˜ëŠ” í„°ì¹˜ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°±ì„ ë“±ë¡í•˜ëŠ” ì»¤ìŠ¤í…€ í›…ì…ë‹ˆë‹¤.

ì§€ì •ëœ ìš”ì†Œ(`ref`ë¡œ ì§€ì •ëœ ìš”ì†Œ) ì™¸ë¶€ì—ì„œ ì‚¬ìš©ìê°€ ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­í•˜ê±°ë‚˜, í„°ì¹˜ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ ì œê³µëœ `callback` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. 

ëª¨ë°”ì¼ í™˜ê²½ì—ì„œëŠ” `touchstart`, ë°ìŠ¤í¬íƒ‘ í™˜ê²½ì—ì„œëŠ” `mousedown` ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•©ë‹ˆë‹¤.

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useOutsidePointerDown/index.ts)

## Interface
```ts title="typescript"
function useOutsidePointerDown<T extends HTMLElement>(
  callback: (targetElement: T) => void,
  options?: {
    excludeRefs: React.RefObject<HTMLElement>[];
  }
): { ref: React.RefObject<T> };
```

## Usage
```tsx title="typescript"
import { useMemo, useState } from 'react';
import { useOutsidePointerDown } from '@modern-kit/react';

const Example = () => {
  const [number, setNumber] = useState(0);

  const excludeRef = useRef<HTMLDivElement>(null);
  const targetRef = useOutsidePointerDown<HTMLDivElement>(() => {
    setNumber(number + 1);
  }, {
    excludeRefs: [excludeRef], // ì™¸ë¶€ í´ë¦­ ë° í„°ì¹˜ ê°ì§€ë¥¼ ì œì™¸í•  ìš”ì†Œì˜ ref ë°°ì—´ì…ë‹ˆë‹¤.
  });
  
  const outerBoxStyle = useMemo(() => {
    return { /* ... */ };
  }, []);

  const InnerBoxStyle = useMemo(() => {
    return { /* ... */ };
  }, []);

  const ExcludeBoxStyle = useMemo(() => {
    return { /* ... */ };
  }, []);

  return (
    <div style={outerBoxStyle}>
      <h3>Target Box ì™¸ë¶€ë¥¼ í´ë¦­í•´ë³´ì„¸ìš”!<br />(Exclude BoxëŠ” í´ë¦­ ê°ì§€ì— ì œì™¸ë©ë‹ˆë‹¤.)</h3>
      <p>number: {number}</p> 

      <div ref={targetRef} style={InnerBoxStyle}>
        <h3>Target Box</h3>
      </div>

      <div ref={excludeRef} style={ExcludeBoxStyle}>
        <h3>Exclude Box</h3>
      </div>
    </div>
  );
};
```

export const Example = () => {
  const [number, setNumber] = useState(0);
  const excludeRef = useRef(null);
  const targetRef = useOutsidePointerDown(() => {
    setNumber(number + 1);
  }, {
    excludeRefs: [excludeRef],
  });
  
  const outerBoxStyle = useMemo(() => {
    return {
      width: '400px',
      background: 'blue',
      color: '#fff',
    };
  }, []);

  const InnerBoxStyle = useMemo(() => {
    return {
      width: '400px',
      background: '#439966',
      color: '#fff',
      padding: '20px',
    };
  }, []);

  const ExcludeBoxStyle = useMemo(() => {
    return {
      width: '200px',
      background: 'red',
      color: '#fff',
      padding: '20px',
    };
  }, []);

  return (
    <div style={outerBoxStyle}>
      <h3>Target Box ì™¸ë¶€ë¥¼ í´ë¦­í•´ë³´ì„¸ìš”!<br />(Exclude BoxëŠ” í´ë¦­ ê°ì§€ì— ì œì™¸ë©ë‹ˆë‹¤.)</h3>
      <p>number: {number}</p> 

      <div ref={targetRef} style={InnerBoxStyle}>
        <h3>Target Box</h3>
      </div>

      <div ref={excludeRef} style={ExcludeBoxStyle}>
        <h3>Exclude Box</h3>
      </div>
    </div>
  );
};

<BrowserOnly>
  {() => <Example />}
</BrowserOnly>


## Note
- [PointerEvent](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent)