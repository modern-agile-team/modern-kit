import { useState } from 'react';
import { useControllableState } from '@modern-kit/react'

# useControllableState

ì œì–´ëœ ìƒíƒœì™€ ë¹„ì œì–´ëœ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¤ìŠ¤í…€ í›…ì…ë‹ˆë‹¤. 

`value`ê°€ ì œê³µë˜ë©´ `ì œì–´ ëª¨ë“œ(controlled mode)`ë¡œ ì²˜ë¦¬ë˜ë©°, ì œê³µë˜ì§€ ì•Šìœ¼ë©´ `ë¹„ì œì–´ ëª¨ë“œ(uncontrolled mode)`ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

- controlled modeì—ì„œëŠ” valueëŠ” ì™¸ë¶€ì—ì„œ ì œì–´ë˜ë©°, í•´ë‹¹ í›…ì´ ë°˜í™˜í•˜ëŠ” setValue í•¨ìˆ˜ë¥¼ í†µí•´ ë‚´ë¶€ valueë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

- uncontrolled modeì—ì„œëŠ” defaultValueê°€ ì´ˆê¸°ê°’ìœ¼ë¡œ ì‚¬ìš©ë˜ë©°, í•´ë‹¹ í›…ì´ ë°˜í™˜í•˜ëŠ” setValue í•¨ìˆ˜ë¥¼ í†µí•´ ë‚´ë¶€ valueë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

### Note
ì£¼ìš” ì‚¬ìš©ì²˜ë¡œëŠ” `checkbox`, `radio` ë“±ì˜ ìš”ì†Œë“¤ì˜ ì²´í¬ ìƒíƒœë¥¼ ì œì–´/ë¹„ì œì–´ë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ë•Œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- propsë¡œ valueë¥¼ ì œê³µí•˜ë©´ ì œì–´ ëª¨ë“œë¡œ ë™ì‘í•˜ê³ , ì œê³µí•˜ì§€ ì•Šìœ¼ë©´ ë¹„ì œì–´ ëª¨ë“œë¡œ ë™ì‘í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useControllableState/index.ts)

## Interface
```ts title="typescript"
interface UseControllableStateOptions<T> {
  value?: T | undefined;
  defaultValue: T;
}
```
```ts title="typescript"
function useControllableState<T>({
  value,
  defaultValue,
}: UseControllableStateOptions<T>): [T, (nextValue: SetStateAction<T>) => void];
```

## Usage

### ë¹„ì œì–´ ëª¨ë“œ (Uncontrolled Mode)
- `value`ê°€ ì œê³µë˜ì§€ ì•Šê±°ë‚˜ `undefined`ì¸ ê²½ìš° ë¹„ì œì–´ ëª¨ë“œ(uncontrolled mode)ë¡œ ë™ì‘í•©ë‹ˆë‹¤. 
- ì´ë•Œ `defaultValue`ê°€ ì´ˆê¸°ê°’ìœ¼ë¡œ ì‚¬ìš©ë˜ë©°, `setValue` í•¨ìˆ˜ë¥¼ í†µí•´ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx title="typescript"
import { useControllableState } from '@modern-kit/react';

const UncontrolledExample = () => {
  const [value, setValue] = useControllableState({ defaultValue: 0 });

  return (
    <div>
      <p>í˜„ì¬ ê°’: {value}</p>
      <button onClick={() => setValue((prev) => (prev ?? 0) + 1)}>
        ì¦ê°€
      </button>
      <button onClick={() => setValue(0)}>ë¦¬ì…‹</button>
    </div>
  );
};
```

### ì œì–´ ëª¨ë“œ (Controlled Mode)
- `value`ê°€ ì œê³µëœ ê²½ìš° ì œì–´ ëª¨ë“œ(controlled mode)ë¡œ ë™ì‘í•©ë‹ˆë‹¤. 
-ì´ë•Œ ìƒíƒœëŠ” ì™¸ë¶€ì—ì„œ ì œì–´ë˜ë©°, `useControllableState`ì—ì„œ ë°˜í™˜ëœ `setValue` í•¨ìˆ˜ë¡œëŠ” ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

```tsx title="typescript"
import { useState } from 'react';
import { useControllableState } from '@modern-kit/react';

const ControlledExample = () => {
  const [externalValue, setExternalValue] = useState(10);
  const [value, setValue] = useControllableState({ value: externalValue, defaultValue: 0 });

  return (
    <div>
      <p>í˜„ì¬ ê°’: {value}</p>
      <button onClick={() => setValue((prev) => (prev ?? 0) + 1)}>
        ë‚´ë¶€ì—ì„œ ì¦ê°€ (ì‘ë™í•˜ì§€ ì•ŠìŒ)
      </button>
      <button onClick={() => setExternalValue((prev) => prev + 1)}>
        ì™¸ë¶€ì—ì„œ ì¦ê°€ (ì‘ë™í•¨)
      </button>
    </div>
  );
};
```

## Example

export const UncontrolledExample = () => {
  const [value, setValue] = useControllableState({ defaultValue: 0 });

  return (
    <div>
      <p>ë¹„ì œì–´ ëª¨ë“œ - í˜„ì¬ ê°’: {value}</p>
      <button onClick={() => setValue((prev) => (prev ?? 0) + 1)}>
        ì¦ê°€
      </button>
      <button onClick={() => setValue(0)}>ë¦¬ì…‹</button>
    </div>
  );
};

export const ControlledExample = () => {
  const [externalValue, setExternalValue] = useState(10);
  const [value, setValue] = useControllableState({ value: externalValue, defaultValue: 0 });

  return (
    <div>
      <p>ì œì–´ ëª¨ë“œ - í˜„ì¬ ê°’: {value}</p>
      <button onClick={() => setValue((prev) => (prev ?? 0) + 1)}>
        ë‚´ë¶€ì—ì„œ ì¦ê°€ (ì‘ë™í•˜ì§€ ì•ŠìŒ)
      </button>
      <button onClick={() => setExternalValue((prev) => prev + 1)}>
        ì™¸ë¶€ì—ì„œ ì¦ê°€
      </button>
    </div>
  );
};

### ë¹„ì œì–´ ëª¨ë“œ (Uncontrolled Mode)
<UncontrolledExample />

### ì œì–´ ëª¨ë“œ (Controlled Mode)  
<ControlledExample />