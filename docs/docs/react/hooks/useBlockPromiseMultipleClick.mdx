import { useState } from 'react';
import { useBlockPromiseMultipleClick } from '@modern-kit/react';

# useBlockPromiseMultipleClick

ì¸ìë¡œ ë„˜ê²¨ì¤€ Callback í•¨ìˆ˜ì˜ `Promise` ë™ì‘ì„ ìˆ˜í–‰í•˜ëŠ” ë™ì•ˆ `ì¤‘ë³µ í˜¸ì¶œì´ ë¶ˆê°€ëŠ¥í•˜ë„ë¡ ì°¨ë‹¨`í•˜ëŠ” ì»¤ìŠ¤í…€ í›…ì…ë‹ˆë‹¤.

[useDebounce](https://modern-agile-team.github.io/modern-kit/docs/react/hooks/useDebounce)ë¥¼ ì‚¬ìš©í•´ ì¤‘ë³µ í˜¸ì¶œì„ ë°©ì§€í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, ì‹œê°„ ê°’ì— ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— ë§Œì•½ `Promise`ê°€ ì´í–‰ë  ë•Œê¹Œì§€ í˜¸ì¶œì„ ì™„ë²½í•˜ê²Œ ì°¨ë‹¨í•´ì•¼ í•œë‹¤ë©´ ë¶€ì¡±í•©ë‹ˆë‹¤.

í•´ë‹¹ í›…ì€ Promise ë™ì‘ì„ ìˆ˜í–‰í•˜ëŠ” ë™ì•ˆ ì¤‘ë³µ í˜¸ì¶œì„ ë°©ì§€í•˜ê¸° ë•Œë¬¸ì—, `Promise` ì´í–‰ì„ ë³´ì¥í•˜ë©´ì„œ ì¤‘ë³µ í˜¸ì¶œì„ ë°©ì§€í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useBlockPromiseMultipleClick/index.ts)

## Interface
```ts title="typescript"
function useBlockPromiseMultipleClick(): {
  isLoading: boolean;
  blockMultipleClick: <T>(callback: () => Promise<T>) => Promise<T | undefined>;
};
```

## Usage

```tsx title="typescript"
import React, { useState } from 'react';
import { useBlockPromiseMultipleClick } from '@modern-kit/react';

interface Value {
  userId: number;
  id: number;
  title: string;
  completed: boolean;
}

const Example = () => {
  const [blockingCount, setBlockingCount] = useState(1);
  const [nonBlockingCount, setNonBlockingCount] = useState(1);
  const [value, setValue] = useState<Value | null>(null);

  const { isLoading, blockMultipleClick } = useBlockPromiseMultipleClick();

  const fetchApi = async () => {
    const res = await fetch(
      `https://jsonplaceholder.typicode.com/todos/${blockingCount}`
    ).then((response) => response.json());

    setValue(res);
    setBlockingCount(blockingCount + 1);
  };

  const handleClick = () => {
    setNonBlockingCount(nonBlockingCount + 1);
    blockMultipleClick(fetchApi); // (*) Promise ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë„£ì–´ì£¼ì„¸ìš”.
  };

  return (
    <div>
      <button onClick={handleClick}>ë²„íŠ¼ í´ë¦­</button>
      <div>
        <p>BlockingCount: {blockingCount}</p>
        <p>NonBlockingCount: {nonBlockingCount}</p>
      </div>
      {isLoading ? <p>ë¡œë”©ì¤‘</p> : <p>{value?.title}</p>}
    </div>
  );
};
```

## Example

export const Example = () => {
  const [blockingCount, setBlockingCount] = useState(1);
  const [nonBlockingCount, setNonBlockingCount] = useState(1);
  const [value, setValue] = useState(null);
  const { isLoading, blockMultipleClick } = useBlockPromiseMultipleClick();
  const fetchApi = async () => {
    const res = await fetch(
      `https://jsonplaceholder.typicode.com/todos/${blockingCount}`
    ).then((response) => response.json());
    setValue(res);
    setBlockingCount(blockingCount + 1);
  };
  const handleClick = () => {
    setNonBlockingCount(nonBlockingCount + 1);
    blockMultipleClick(fetchApi);
  };
  return (
    <div>
      <button onClick={handleClick}>ë²„íŠ¼ í´ë¦­</button>
      <div>
        <p>BlockingCount: {blockingCount}</p>
        <p>NonBlockingCount: {nonBlockingCount}</p>
      </div>
      {isLoading ? <p>ë¡œë”©ì¤‘</p> : <p>{value?.title}</p>}
    </div>
  );
};

<Example />