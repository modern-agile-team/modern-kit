import { useState } from 'react';
import { useBlockMultipleAsyncCalls } from '@modern-kit/react';

# useBlockMultipleAsyncCalls

`useBlockMultipleAsyncCalls` í›…ì€ ì§„í–‰ ì¤‘ì¸ ë¹„ë™ê¸° í˜¸ì¶œì´ ìˆì„ ë•Œ ì¤‘ë³µ í˜¸ì¶œì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ í›…ì…ë‹ˆë‹¤.

`debounce`ëŠ” í•¨ìˆ˜ì˜ ì¤‘ë³µ í˜¸ì¶œì„ ë°©ì§€í•˜ëŠ” ë° ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— íš¨ê³¼ì ì…ë‹ˆë‹¤.
í•˜ì§€ë§Œ, `debounce`ëŠ” ë¹„ë™ê¸° ì‘ì—…ì˜ ì™„ë£Œë¥¼ ë³´ì¥í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë‹¤ìŒê³¼ ê°™ì€ í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤:

1. `debounce` ì‹œê°„ì´ API ì‘ë‹µ ì‹œê°„ë³´ë‹¤ ì§§ì„ ê²½ìš°: ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ `ë‹¤ì‹œ í˜¸ì¶œ`ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. `debounce` ì‹œê°„ì´ API ì‘ë‹µ ì‹œê°„ë³´ë‹¤ ê¸¸ ê²½ìš°: ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆì§€ë§Œ `ë²„íŠ¼`ê³¼ ê°™ì€ ìš”ì†Œê°€ ì—¬ì „íˆ `ë¹„í™œì„±í™”`ë˜ì–´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. `ì¦‰ê°ì ì¸ ë°˜ì‘`ì„ ì›í•˜ëŠ” ê²½ìš°: `debounce`ëŠ” í˜¸ì¶œì„ ì§€ì—°ì‹œí‚¤ê¸° ë•Œë¬¸ì— ì‚¬ìš©ìì—ê²Œ `ì¦‰ê°ì ì¸ ë°˜ì‘`ì„ ë³´ì—¬ì£¼ê¸°ì— ì œí•œì ì…ë‹ˆë‹¤.

ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— `debounce`ë§Œìœ¼ë¡œ ì¶©ë¶„í•˜ì§€ë§Œ, ìœ„ì™€ ê°™ì€ í•œê³„ì ì„ ëŒ€ì‘í•˜ê³ ì í•œë‹¤ë©´ `useBlockMultipleAsyncCalls`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- [useDebounce](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useDebounce/index.ts)

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useBlockMultipleAsyncCalls/index.ts)

## Interface
```ts title="typescript"
interface UseBlockMultipleAsyncCallsReturnType {
  isError: boolean;
  isLoading: boolean;
  blockMultipleAsyncCalls: <T>(
    callback: () => Promise<T>
  ) => Promise<T | undefined>;
}
```
```ts title="typescript"
function useBlockMultipleAsyncCalls(): UseBlockMultipleAsyncCallsReturnType
```

## Usage

```tsx title="typescript"
import React, { useState } from 'react';
import { useBlockMultipleAsyncCalls } from '@modern-kit/react';

interface Value {
  userId: number;
  id: number;
  title: string;
  completed: boolean;
}

const Example = () => {
  const [blockingCount, setBlockingCount] = useState(1);
  const [nonBlockingCount, setNonBlockingCount] = useState(1);
  const [value, setValue] = useState<Value | null>(null);

  const { isError, isLoading, blockMultipleAsyncCalls } = useBlockMultipleAsyncCalls();

  const fetchApi = async () => {
    const res = await fetch(
      `https://jsonplaceholder.typicode.com/todos/${blockingCount}`
    ).then((response) => response.json());

    setValue(res);
    setBlockingCount(blockingCount + 1);
  };

  const handleClick = () => {
    setNonBlockingCount(nonBlockingCount + 1);
    blockMultipleAsyncCalls(fetchApi); // (*) Promise ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë„£ì–´ì£¼ì„¸ìš”.
  };

  return (
    <div>
      <button onClick={handleClick}>ë²„íŠ¼ í´ë¦­</button>
      <div>
        <p>BlockingCount: {blockingCount}</p>
        <p>NonBlockingCount: {nonBlockingCount}</p>
      </div>
      {isLoading ? <p>ë¡œë”©ì¤‘</p> : <p>{value?.title}</p>}
      {isError && <p>ì—ëŸ¬ ë°œìƒ</p>}
    </div>
  );
};
```

## Example

export const Example = () => {
  const [blockingCount, setBlockingCount] = useState(1);
  const [nonBlockingCount, setNonBlockingCount] = useState(1);
  const [value, setValue] = useState(null);
  const { isLoading, blockMultipleAsyncCalls } = useBlockMultipleAsyncCalls();
  const fetchApi = async () => {
    const res = await fetch(
      `https://jsonplaceholder.typicode.com/todos/${blockingCount}`
    ).then((response) => response.json());
    setValue(res);
    setBlockingCount(blockingCount + 1);
  };
  const handleClick = () => {
    setNonBlockingCount(nonBlockingCount + 1);
    blockMultipleAsyncCalls(fetchApi);
  };
  return (
    <div>
      <button onClick={handleClick}>ë²„íŠ¼ í´ë¦­</button>
      <div>
        <p>BlockingCount: {blockingCount}</p>
        <p>NonBlockingCount: {nonBlockingCount}</p>
      </div>
      {isLoading ? <p>ë¡œë”©ì¤‘</p> : <p>{value?.title}</p>}
    </div>
  );
};

<Example />