import { useState } from 'react';
import { useIntersectionObserver } from '@modern-kit/react';

# useIntersectionObserver

`ref`ë¥¼ í• ë‹¹í•œ íƒ€ê²Ÿ ì—˜ë¦¬ë¨¼íŠ¸ê°€ `Viewport`ì— ë…¸ì¶œë  ë•Œ(`onIntersectStart`) í˜¹ì€ ë‚˜ê°ˆ ë•Œ(`onIntersectEnd`) íŠ¹ì • action í•¨ìˆ˜ë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

`calledOnce`ì˜µì…˜ì„ `true`ë¡œ ì„¤ì •í•˜ë©´ `onIntersectStart`ì™€ `onIntersectEnd`ë¥¼ ê°ê° í•œë²ˆì”© í˜¸ì¶œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`enabled`ì˜µì…˜ì„ í†µí•´ `onIntersect*` ì½œë°± í•¨ìˆ˜ë“¤ì˜ í˜¸ì¶œì„ ì œì–´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `false`ë¼ë©´ íƒ€ê²Ÿ ì—˜ë¦¬ë¨¼íŠ¸ê°€ Viewportì— ë…¸ì¶œí•˜ë”ë¼ë„ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

Intersection Observer Optionì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(í•˜ë‹¨ `Note` ì°¸ê³ )

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useIntersectionObserver/index.ts)

## Interface
```ts title="typescript"
interface IntersectionObserverInit {
  root?: Element | Document | null;
  rootMargin?: string;
  threshold?: number | number[];
}

interface UseIntersectionObserverProps extends IntersectionObserverInit {
  onIntersectStart?: (entry: IntersectionObserverEntry) => void;
  onIntersectEnd?: (entry: IntersectionObserverEntry) => void;
  calledOnce?: boolean;
  enabled?: boolean;
}
```
```ts title="typescript"
const useIntersectionObserver: <T extends HTMLElement>({
  onIntersectStart,
  onIntersectEnd,
  enabled, // default: true
  calledOnce, // default: false
  root, // default: null
  threshold, // default: 0
  rootMargin, // default: '0px 0px 0px 0px'
}: UseIntersectionObserverProps) => { 
  ref: React.RefCallback<T> 
};
```

## Usage
```tsx title="typescript"
import { useIntersectionObserver } from '@modern-kit/react';

const Example = () => {
  const [enabled, setEnabled] = useState(false);
  const { ref: targetRef } = useIntersectionObserver({
    onIntersectStart: (entry) => {
      console.log("onIntersectStart: ", entry);
    },
    onIntersectEnd: (entry) => {
      console.log("onIntersectEnd: ", entry);
    },
    enabled,
  });
  const boxStyle = {
    height: "800px", 
    backgroundColor: "teal"
  }

  return (
    <div>
      <button onClick={() => setEnabled(!enabled)}>Toggle Enabled: {`${enabled}`}</button>
      <div style={boxStyle} />
      <div ref={targetRef} style={{ color: "white", fontSize: "24px", backgroundColor: "blue" }}>
        íƒ€ê²Ÿ ìš”ì†Œ<br />
        ê°œë°œì ë„êµ¬ ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
      </div>
      <div style={boxStyle} />
    </div>
  );
};
```

## Exmaple

export const Example = () => {
  const [enabled, setEnabled] = useState(false);
  const { ref: targetRef } = useIntersectionObserver({
    onIntersectStart: (entry) => {
      console.log("onIntersectStart: ", entry);
    },
    onIntersectEnd: (entry) => {
      console.log("onIntersectEnd: ", entry);
    },
    enabled,
  });
  const boxStyle = {
    height: "800px", 
    backgroundColor: "teal"
  }
  return (
    <div>
      <button onClick={() => setEnabled(!enabled)}>Toggle Enabled: {`${enabled}`}</button>
      <div style={boxStyle} />
      <div ref={targetRef} style={{ color: "white", fontSize: "24px", backgroundColor: "blue" }}>
        íƒ€ê²Ÿ ìš”ì†Œ<br />
        ê°œë°œì ë„êµ¬ ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
      </div>
      <div style={boxStyle} />
    </div>
  );
};

<Example />

## Note
- [Intersection Observer API](https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver)