import { useScrollRestoration } from '@modern-kit/react';
import { useState, useEffect } from 'react';

# useScrollRestoration

ë¸Œë¼ìš°ì € ë˜ëŠ” íŠ¹ì • ì—˜ë¦¬ë¨¼íŠ¸ì˜ ì´ì „ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ì €ì¥í•˜ê³  ë³µì›í•˜ëŠ” ì»¤ìŠ¤í…€ í›…ì…ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ windowì˜ ìŠ¤í¬ë¡¤ì„ ê´€ë¦¬í•˜ë©°, `ref`ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ìŠ¤í¬ë¡¤ ì˜ì—­ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useScrollRestoration/index.ts)

<br />

## Interface
```ts title="typescript"
interface UseScrollRestorationOptions {
  id?: string;
  enabled?: boolean;
  behavior?: ScrollOptions['behavior'];
}

function useScrollRestoration<T extends HTMLElement>({
  id,
  enabled,
  behavior,
}?: UseScrollRestorationOptions): {
  ref: React.RefObject<T>;
};
```

<br />

### Options

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `id` | `string` | `'window'` ë˜ëŠ” `'element'` | ìŠ¤í¬ë¡¤ ë³µì› ì‹ë³„ì (ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš© ì‹œ í•„ìˆ˜)|
| `enabled` | `boolean` | `true` | ìŠ¤í¬ë¡¤ ë³µì› í™œì„±í™” ì—¬ë¶€ |
| `behavior` | `ScrollOptions['behavior']` | `'instant'` | ìŠ¤í¬ë¡¤ ë³µì› ë™ì‘ ë°©ì‹ (`'auto'`, `'instant'`, `'smooth'`) |

<br />

## Remarks

:::caution ì£¼ì˜ì‚¬í•­
- í•œ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì—¬ëŸ¬ ë²ˆ í›…ì„ ì‚¬ìš©í•  ê²½ìš°, ê° ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ë¶„í•˜ë ¤ë©´ `id` ì˜µì…˜ì„ ëª…ì‹œì ìœ¼ë¡œ ë¶€ì—¬í•˜ì„¸ìš”.
- ë³„ë„ì˜ `id`ë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´, `ref`ê°€ ìˆëŠ” ê²½ìš° `'element'`, ì—†ëŠ” ê²½ìš°ëŠ” `'window'`ë¡œ ê¸°ë³¸ê°’ì´ ì„¤ì •ë©ë‹ˆë‹¤.
- idë¥¼ ë¶€ì—¬í•˜ì§€ ì•Šì€ ê²½ìš°, ì¤‘ë³µ keyë¡œ ì¸í•´ ìŠ¤í¬ë¡¤ ë³µì› ë™ì‘ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.
- ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì €ì¥ì€ ìƒˆë¡œê³ ì¹¨, í˜ì´ì§€ ì´ë™(ë’¤ë¡œ/ì•ìœ¼ë¡œê°€ê¸°), í›…ì˜ ì–¸ë§ˆìš´íŠ¸ ì‹œì ì— ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
- ë”°ë¼ì„œ, ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ì§€ ì•Šê³  ìœ ì§€ë˜ëŠ” êµ¬ì¡°ì—ì„œ í•´ë‹¹ í›…ì„ í˜¸ì¶œ ì‹œ ìŠ¤í¬ë¡¤ ë³µì› ë™ì‘ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. (ì˜ˆ: Layout ì»´í¬ë„ŒíŠ¸)
:::

<br />

## Usage

### Window Scroll

```tsx title="typescript"
import { useScrollRestoration } from '@modern-kit/react';

const Page = () => {
  useScrollRestoration();

  return (
    <div>
      {/* ê¸´ ì»¨í…ì¸ ... */}
    </div>
  );
};
```

<br />

### Specific Element

```tsx title="typescript"
import { useScrollRestoration } from '@modern-kit/react';

const ScrollBox = () => {
  const { ref } = useScrollRestoration<HTMLDivElement>();

  return (
    <div 
      ref={ref} 
      style={{ height: '500px', overflowY: 'auto' }}
    >
      {/* ë‚´ë¶€ ìŠ¤í¬ë¡¤ì´ ë°œìƒí•˜ëŠ” ì»¨í…ì¸  */}
    </div>
  );
};
```

<br />

### Multiple Instances

í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì—¬ëŸ¬ ìŠ¤í¬ë¡¤ ì˜ì—­ì„ ê´€ë¦¬í•  ë•ŒëŠ” `id`ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë¶€ì—¬í•´ì•¼ í•©ë‹ˆë‹¤.

```tsx title="typescript"
import { useScrollRestoration } from '@modern-kit/react';

const MultiScrollPage = () => {
  useScrollRestoration(); // window ìŠ¤í¬ë¡¤ (ê¸°ë³¸ id: 'window')
  const { ref: sidebarRef } = useScrollRestoration<HTMLDivElement>({ id: 'sidebar' });
  const { ref: contentRef } = useScrollRestoration<HTMLDivElement>({ id: 'content' });

  return (
    <div>
      <aside ref={sidebarRef} style={{ height: '100vh', overflowY: 'auto' }}>
        {/* ì‚¬ì´ë“œë°” ì»¨í…ì¸  */}
      </aside>
      <main ref={contentRef} style={{ height: '100vh', overflowY: 'auto' }}>
        {/* ë©”ì¸ ì»¨í…ì¸  */}
      </main>
    </div>
  );
};
```

<br />

### Example1

export const Example1 = () => {
  const { ref } = useScrollRestoration({ id: 'example1', behavior: 'smooth' }); 

  return (
    <div>
      <p>1. ì•„ë˜ íŒŒë€ ë°•ìŠ¤ ì•ˆì—ì„œ <strong>ìŠ¤í¬ë¡¤ì„ ì¤‘ê°„ì¯¤ ë‚´ë¦¬ì„¸ìš”.</strong></p>
      <p>2. ë¸Œë¼ìš°ì €ì˜ <strong>'ë’¤ë¡œ ê°€ê¸°'</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</p>
      <p>3. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°€ ìœ ì§€ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>

      <div 
        ref={ref} 
        style={{ 
          height: '300px',      
          overflowY: 'scroll',   
          border: '2px solid #333', 
          padding: '20px',
          borderRadius: '8px'
        }}
      >
       
        {Array.from({ length: 20 }, (_, i) => i).map((i) => (
          <div 
            key={i} 
            style={{ 
              height: '80px', 
              background: i % 2 === 0 ? '#e0e7ff' : '#f3f4f6',
              marginBottom: '10px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center'
            }}
          >
            ë°ì´í„° {i + 1}
          </div>
        ))}
      </div>
    </div>
  );
};

<Example1 />

<br />

### Example2 (ë°ì´í„° ë¡œë”© í›„ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ë³µì›)

export const Example2 = () => {
  const { ref } = useScrollRestoration({ id: 'example2', behavior: 'smooth' }); 

  const [list, setList] = useState([]);

  useEffect(() => {
    setTimeout(() => {
      setList(Array.from({ length: 20 }, (_, i) => i));
    }, 1000)
  }, []);

  return (
    <div>
      <p>1. ì•„ë˜ íŒŒë€ ë°•ìŠ¤ ì•ˆì—ì„œ <strong>ìŠ¤í¬ë¡¤ì„ ì¤‘ê°„ì¯¤ ë‚´ë¦¬ì„¸ìš”.</strong></p>
      <p>2. ë¸Œë¼ìš°ì €ì˜ <strong>'ë’¤ë¡œ ê°€ê¸°'</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</p>
      <p>3. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°€ ìœ ì§€ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>

      <div 
        ref={ref} 
        style={{ 
          height: '300px',      
          overflowY: 'scroll',   
          border: '2px solid #333', 
          padding: '20px',
          borderRadius: '8px'
        }}
      >
       
        {list.map((i) => (
          <div 
            key={i} 
            style={{ 
              height: '80px', 
              background: i % 2 === 0 ? '#e0e7ff' : '#f3f4f6',
              marginBottom: '10px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center'
            }}
          >
            ë°ì´í„° {i + 1}
          </div>
        ))}
      </div>
    </div>
  );
};

<Example2 />

<br />

### Example3 (ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©)

export const Example3 = () => {
  const { ref: sidebarRef } = useScrollRestoration({ id: 'sidebar', behavior: 'smooth' }); 
  const { ref: contentRef } = useScrollRestoration({ id: 'content', behavior: 'smooth' });

  return (
    <div>
      <p>1. ì•„ë˜ íŒŒë€ ë°•ìŠ¤ ì•ˆì—ì„œ <strong>ìŠ¤í¬ë¡¤ì„ ì¤‘ê°„ì¯¤ ë‚´ë¦¬ì„¸ìš”.</strong></p>
      <p>2. ë¸Œë¼ìš°ì €ì˜ <strong>'ë’¤ë¡œ ê°€ê¸°'</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</p>
      <p>3. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°€ ìœ ì§€ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>

      <div 
        ref={contentRef} 
        style={{ 
          height: '300px',      
          overflowY: 'scroll',   
          border: '2px solid #333', 
          padding: '20px',
          borderRadius: '8px'
        }}
      >
       
        {Array.from({ length: 20 }, (_, i) => i).map((i) => (
          <div 
            key={i} 
            style={{ 
              height: '80px', 
              background: i % 2 === 0 ? '#e0e7ff' : '#f3f4f6',
              marginBottom: '10px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center'
            }}
          >
            ë°ì´í„°(1ë²ˆì§¸ ì˜ì—­) {i + 1}
          </div>
        ))}
      </div>

      <br />

      <div 
        ref={sidebarRef} 
        style={{ 
          height: '300px',      
          overflowY: 'scroll',   
          border: '2px solid #333', 
          padding: '20px',
          borderRadius: '8px'
        }}
      >
       
        {Array.from({ length: 20 }, (_, i) => i).map((i) => (
          <div 
            key={i} 
            style={{ 
              height: '80px', 
              background: i % 2 === 0 ? '#e0e7ff' : '#f3f4f6',
              marginBottom: '10px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center'
            }}
          >
            ë°ì´í„°(2ë²ˆì§¸ ì˜ì—­) {i + 1}
          </div>
        ))}
      </div>
    </div>
  );
};

<Example3 />