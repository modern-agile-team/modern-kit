import { useEventListener } from '@modern-kit/react';
import { useState, useRef } from 'react';
import BrowserOnly from '@docusaurus/BrowserOnly';

# useEventListener

ì§€ì •ëœ ìš”ì†Œì— `ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€`í•˜ê³ , ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ `ìë™ìœ¼ë¡œ ì œê±°`í•©ë‹ˆë‹¤.

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useEventListener/index.ts)

## Interface
```ts title="typescript"
type EventListenerAvailableElement =
  | Window
  | Document
  | HTMLElement
  | SVGElement
  | MediaQueryList;

type TargetElement<T extends EventListenerAvailableElement> =
  | T
  | RefObject<T | null | undefined>;
```
```ts title="typescript"
// Window ì´ë²¤íŠ¸ ê¸°ë°˜ useEventListener ì¸í„°í˜ì´ìŠ¤
function useEventListener<K extends keyof WindowEventMap>(
  element: Window | null,
  type: K,
  listener: (event: WindowEventMap[K]) => void,
  options?: boolean | AddEventListenerOptions
): void;

// Document ì´ë²¤íŠ¸ ê¸°ë°˜ useEventListener ì¸í„°í˜ì´ìŠ¤
function useEventListener<K extends keyof DocumentEventMap>(
  element: Document | null,
  type: K,
  listener: (event: DocumentEventMap[K]) => void,
  options?: boolean | AddEventListenerOptions
): void;

// MediaQueryList ì´ë²¤íŠ¸ ê¸°ë°˜ useEventListener ì¸í„°í˜ì´ìŠ¤
function useEventListener<K extends keyof MediaQueryListEventMap>(
  element: MediaQueryList | null,
  type: K,
  listener: (event: MediaQueryListEventMap[K]) => void,
  options?: boolean | AddEventListenerOptions
): void;

// Element ì´ë²¤íŠ¸ ê¸°ë°˜ useEventListener ì¸í„°í˜ì´ìŠ¤
function useEventListener<
  K extends keyof HTMLElementEventMap,
  T extends HTMLElement
>(
  element: TargetElement<T> | null,
  type: K,
  listener: (event: HTMLElementEventMap[K]) => void,
  options?: boolean | AddEventListenerOptions
): void;

// SVGElement ì´ë²¤íŠ¸ ê¸°ë°˜ useEventListener ì¸í„°í˜ì´ìŠ¤
function useEventListener<
  K extends keyof SVGElementEventMap,
  T extends SVGElement
>(
  element: TargetElement<T> | null,
  type: K,
  listener: (event: SVGElementEventMap[K]) => void,
  options?: boolean | AddEventListenerOptions
): void;
```

## Usage
```tsx title="typescript"
import { useState, useRef } from 'react';
import { useEventListener } from '@modern-kit/react';

const Example = () => {
  const [number, setNumber] = useState(0)
  const buttonRef = useRef<HTMLButtonElement | null>(null);

  useEventListener(document, 'click', () => {
    console.log(number);
  })

  useEventListener(buttonRef, 'click', () => {
    setNumber(number + 1);
  })

  return (
    <div>
      <p>number: {number}</p>
      <button ref={buttonRef}>ìˆ«ì ë”í•˜ê¸°</button>
    </div>
  );
};
```
### SSR í™˜ê²½ì—ì„œ ì‚¬ìš©
```tsx title="typescript"
useEventListener(typeof window !== 'undefined' ? window : null, 'click', () => {
  console.log(number);
})
```

## Example

export const Example = () => {
  const [number, setNumber] = useState(0)
  const buttonRef = useRef(null);

  useEventListener(document, 'click', () => {
    console.log(number);
  })

  useEventListener(buttonRef, 'click', () => {
    setNumber(number + 1);
  })

  return (
    <div>
      <p>number: {number}</p>
      <button ref={buttonRef}>ìˆ«ì ë”í•˜ê¸°</button>
    </div>
  );
};

<BrowserOnly>
  {() => <Example />}
</BrowserOnly>