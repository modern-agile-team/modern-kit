import { useStepState } from '@modern-kit/react';
import { useState } from 'react';

# useStepState

**[useStep](https://modern-agile-team.github.io/modern-kit/docs/react/hooks/useStep)** ì„ í™•ì¥í•´ `multi-step process`ì˜ `step`ì„ ê´€ë¦¬ ë° ì¶”ì í•˜ë©° ë™ì‹œì— `ë‚´ë¶€ ìƒíƒœ`ë¥¼ ê´€ë¦¬ í•  ìˆ˜ ìˆëŠ” ì»¤ìŠ¤í…€ í›…ì…ë‹ˆë‹¤.

<br />

## Code
[ğŸ”— ì‹¤ì œ êµ¬í˜„ ì½”ë“œ í™•ì¸](https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useStepState/index.ts)

## Interface
```ts title="typescript"
interface UseStepProps {
  maxStep: number;
  initialStep?: number; // default: 1
  infinite?: boolean; // default: false
}

interface UseStepWithInitialState<T> extends UseStepProps {
  initialState: T;
}

type UseStepStateProps<T> = UseStepWithInitialState<T> | UseStepProps;
```
```ts title="typescript"
// í•¨ìˆ˜ ì˜¤ë²„ë¡œë”©
export function useStepState<T>({
  initialState,
  ...useStepProps
}: UseStepWithInitialState<T>): ReturnType<typeof useStep> & {
  state: T;
  setState: Dispatch<SetStateAction<T>>;
};

export function useStepState<T>(useStepProps: UseStepStateProps<T>): ReturnType<
  typeof useStep
> & {
  state: T | null;
  setState: Dispatch<SetStateAction<T | null>>;
};
```

## Usage
```tsx title="typescript"
import { useStepState } from '@modern-kit/react';

export const Example = () => {
  const {
    state,
    setState,
    currentStep,
    goToNextStep,
    goToPrevStep,
  } = useStepState({ maxStep: 2, initialState: { name: 'foo' } });

  const handleGoToNextStep = () => {
    setState({ name: 'bar' })
    goToNextStep(({ prevStep, nextStep }) => {
      console.log(`${prevStep}ì—ì„œ ${nextStep}ë¡œ ì´ë™`);
    });
  };

  const handleGoToPrevStep = () => {
    setState({ name: 'foo' })
    goToPrevStep(({ prevStep, nextStep }) => {
      console.log(`${prevStep}ì—ì„œ ${nextStep}ë¡œ ì´ë™`);
    });
  };

  const boxStyle = {
    width: '300px',
    height: '120px',
    fontSize: '21px',
  };

  return (
    <div>
      <div>
        <button onClick={handleGoToPrevStep}>ì´ì „ ìŠ¤íƒ­</button>
        <button onClick={handleGoToNextStep}>ë‹¤ìŒ ìŠ¤íƒ­</button>
      </div>
      <div>
        <p>currentStep: {currentStep}</p>
        <p>state: {JSON.stringify(state)}</p>
      </div>
      <div>
        {currentStep === 1 && (
          <div style={{ ...boxStyle, backgroundColor: 'red' }} >
            1ë²ˆ Step Box
          </div>
        )}
        {currentStep === 2 && (
          <div style={{ ...boxStyle, backgroundColor: 'green' }}>
            2ë²ˆ Step Box
          </div>
        )}
      </div>
    </div>
  );
};
```

## Example

export const Example = () => {
  const {
    state,
    setState,
    currentStep,
    goToNextStep,
    goToPrevStep,
  } = useStepState({ maxStep: 2, initialState: { name: 'foo' } });

  const handleGoToNextStep = () => {
    setState({ name: 'bar' })
    goToNextStep(({ prevStep, nextStep }) => {
      console.log(`${prevStep}ì—ì„œ ${nextStep}ë¡œ ì´ë™`);
    });
  };

  const handleGoToPrevStep = () => {
    setState({ name: 'foo' })
    goToPrevStep(({ prevStep, nextStep }) => {
      console.log(`${prevStep}ì—ì„œ ${nextStep}ë¡œ ì´ë™`);
    });
  };

  const boxStyle = {
    width: '300px',
    height: '120px',
    fontSize: '21px',
  };

  return (
    <div>
      <div>
        <button onClick={handleGoToPrevStep}>ì´ì „ ìŠ¤íƒ­</button>
        <button onClick={handleGoToNextStep}>ë‹¤ìŒ ìŠ¤íƒ­</button>
      </div>
      <div>
        <p>currentStep: {currentStep}</p>
        <p>state: {JSON.stringify(state)}</p>
      </div>
      <div>
        {currentStep === 1 && (
          <div style={{ ...boxStyle, backgroundColor: 'red' }} >
            1ë²ˆ Step Box
          </div>
        )}
        {currentStep === 2 && (
          <div style={{ ...boxStyle, backgroundColor: 'green' }}>
            2ë²ˆ Step Box
          </div>
        )}
      </div>
    </div>
  );
};


<Example />

