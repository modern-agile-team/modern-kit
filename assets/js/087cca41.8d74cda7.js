"use strict";(self.webpackChunk_modern_kit_docs=self.webpackChunk_modern_kit_docs||[]).push([[7168],{653:(e,t,n)=>{n.r(t),n.d(t,{Example:()=>u,assets:()=>l,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"react/hooks/useLocalStorage","title":"useLocalStorage","description":"React v18\ubd80\ud130 \uc9c0\uc6d0\ud558\ub294 useSyncExternalStore \uc744 \ud65c\uc6a9\ud574 \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \ub0b4\uc758 \ud2b9\uc815 key \ub370\uc774\ud130\ub97c \uad6c\ub3c5\ud558\uace0, \uad6c\ub3c5 \uc911\uc778 \ub370\uc774\ud130\uc5d0 \ubcc0\ud654\uac00 \uc788\uc744 \uc2dc \uc774\ub97c \ub3d9\uae30\ud654\ud574\uc8fc\ub294 \ucee4\uc2a4\ud140 \ud6c5\uc785\ub2c8\ub2e4.","source":"@site/docs/react/hooks/useLocalStorage.mdx","sourceDirName":"react/hooks","slug":"/react/hooks/useLocalStorage","permalink":"/modern-kit/docs/react/hooks/useLocalStorage","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"useKeyDown","permalink":"/modern-kit/docs/react/hooks/useKeyDown"},"next":{"title":"useManualTimeout","permalink":"/modern-kit/docs/react/hooks/useManualTimeout"}}');var r=n(1611),a=n(3267),o=n(1138);const i={},c="useLocalStorage",l={},u=()=>{const e={button:"button",div:"div",p:"p",...(0,a.R)()},{state:t,setState:n,removeState:s}=(0,o.M)({key:"test",initialValue:"default"});return(0,r.jsxs)(e.div,{children:[(0,r.jsx)(e.p,{children:"\uac1c\ubc1c\uc790 \ub3c4\uad6c\uc5d0\uc11c \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\uc778\ud574\ubcf4\uc138\uc694!"}),(0,r.jsxs)(e.p,{children:["state: ",t]}),(0,r.jsx)(e.button,{onClick:()=>n("foo"),children:'\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "test"key\uc5d0 "foo"\ub370\uc774\ud130 \uc800\uc7a5'}),(0,r.jsx)(e.button,{onClick:()=>n("bar"),children:'\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "test"key\uc5d0 "bar"\ub370\uc774\ud130 \uc800\uc7a5'}),(0,r.jsx)(e.button,{onClick:()=>s(),children:'\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "test"key \uc81c\uac70'})]})},d=[{value:"Code",id:"code",level:2},{value:"Interface",id:"interface",level:2},{value:"Usage",id:"usage",level:2},{value:"Example",id:"example",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"uselocalstorage",children:"useLocalStorage"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"React v18"}),"\ubd80\ud130 \uc9c0\uc6d0\ud558\ub294 ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://react.dev/reference/react/useSyncExternalStore",children:"useSyncExternalStore"})})," \uc744 \ud65c\uc6a9\ud574 \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \ub0b4\uc758 \ud2b9\uc815 ",(0,r.jsx)(t.code,{children:"key"})," \ub370\uc774\ud130\ub97c \uad6c\ub3c5\ud558\uace0, \uad6c\ub3c5 \uc911\uc778 \ub370\uc774\ud130\uc5d0 \ubcc0\ud654\uac00 \uc788\uc744 \uc2dc \uc774\ub97c \ub3d9\uae30\ud654\ud574\uc8fc\ub294 \ucee4\uc2a4\ud140 \ud6c5\uc785\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(t.p,{children:["\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0 \uad6c\ub3c5\ud558\uace0\uc790 \ud558\ub294 ",(0,r.jsx)(t.code,{children:"key"}),"\uac00 \uc5c6\uc744 \uacbd\uc6b0 \ubc18\ud658\ud560 ",(0,r.jsx)(t.code,{children:"initialValue"}),"\ub85c \ucd08\uae30\uac12\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub610\ud55c, ",(0,r.jsx)(t.code,{children:"\uc11c\ubc84 \uc0ac\uc774\ub4dc \ub80c\ub354\ub9c1(SSR)"}),"\uc758 \uacbd\uc6b0 \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ub3d9\uc791\ud558\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 ",(0,r.jsx)(t.code,{children:"initialValue"}),"\uac00 \ubc18\ud658\ub429\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"setState"}),"\ub294 \uac12 \uc790\uccb4\ub97c \ub118\uae38 \uc218 \uc788\uc73c\uba70, \ud568\uc218\ub3c4 \ub118\uae38 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud568\uc218\ub85c \ud65c\uc6a9 \uc2dc\uc5d0 \uc778\uc790\ub85c state\ub97c \uac00\uc838\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const { state, setState, removeState } = useLocalStorage<number[]>({\n  key: 'test',\n  initialValue: [1, 2],\n});\n\nsetState([1, 2, 3]);\nsetState(state => [...state, 3]);\n"})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(t.p,{children:["initialValue\ub97c \ub118\uaca8\uc8fc\uba74 \ub354\uc6b1 ",(0,r.jsx)(t.code,{children:"\uba85\ud655\ud55c \ud0c0\uc785 \ucd94\ub860"}),"\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const { state, setState } = useLocalStorage<number[]>({\n  key: 'test',\n});\n\nstate; // number[] | null\nsetState(state => {\n  state; // number[] | null\n});\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const { state, setState } = useLocalStorage<number[]>({\n  key: 'test',\n  initialValue: [],\n});\n\nstate; // number[]\nsetState(state => {\n  state; // number[]\n});\n"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"visibilityChange"})," \uc635\uc158\uc744 \ud1b5\ud574 \ube0c\ub77c\uc6b0\uc800 \ud0ed\uc758 \uac00\uc2dc\uc131 \ubcc0\uacbd \uc774\ubca4\ud2b8\ub97c \uac10\uc9c0\ud558\uc5ec \uac00\uc2dc\uc131 \uc0c1\ud0dc\uac00 \ub418\uba74 ",(0,r.jsx)(t.code,{children:"state"}),"\ub97c \ub3d9\uae30\ud654\ud569\ub2c8\ub2e4. \uc0ac\uc6a9 \ucf00\uc774\uc2a4\ub85c ",(0,r.jsx)(t.code,{children:"sessionStorage"}),"\uc640 \ub2e4\ub974\uac8c \ud0ed \uac04 \uacf5\uc720\ub418\ub294 \uc800\uc7a5\uc18c\uc774\uae30 \ub54c\ubb38\uc5d0 \ud0ed \uac04 \ub3d9\uae30\ud654\uac00 \ud544\uc694\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const { state, setState } = useLocalStorage<number[]>({\n  key: 'test',\n  initialValue: [1, 2],\n  visibilityChange: true,\n});\n"})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useLocalStorage/index.ts",children:"\ud83d\udd17 \uc2e4\uc81c \uad6c\ud604 \ucf54\ub4dc \ud655\uc778"})}),"\n",(0,r.jsx)(t.h2,{id:"interface",children:"Interface"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="typescript"',children:"interface UseLocalStorageWithoutInitialValueProps {\n  key: string;\n  visibilityChange?: boolean;\n}\n\ninterface UseLocalStorageWithInitialValueProps<T> {\n  key: string;\n  initialValue: T | (() => T);\n  visibilityChange?: boolean;\n}\n\ntype UseLocalStorageProps<T> =\n  | UseLocalStorageWithoutInitialValueProps\n  | UseLocalStorageWithInitialValueProps<T>;\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"// \ud568\uc218 \uc624\ubc84\ub85c\ub529\nfunction useLocalStorage<T>({\n  key,\n  initialValue,\n}: UseLocalStorageWithInitialValueProps<T>): {\n  state: T;\n  setState: Dispatch<SetStateAction<T>>;\n  removeState: () => void;\n};\n\nfunction useLocalStorage<T = unknown>({\n  key,\n}: UseLocalStorageWithoutInitialValueProps): {\n  state: T | null;\n  setState: Dispatch<SetStateAction<T | null>>;\n  removeState: () => void;\n};\n"})}),"\n",(0,r.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",metastring:'title="typescript"',children:"import { useLocalStorage } from '@modern-kit/react';\n\nconst Example = () => {\n  const { state, setState, removeState } = useLocalStorage<string>({\n    key: 'test',\n    initialValue: 'default',\n  });\n\n  return (\n    <div>\n      <p>\uac1c\ubc1c\uc790 \ub3c4\uad6c\uc5d0\uc11c \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\uc778\ud574\ubcf4\uc138\uc694!</p>\n      <p>state: {state}</p>\n      <button onClick={() => setState('foo')}>\n        {`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key\uc5d0 \"foo\"\ub370\uc774\ud130 \uc800\uc7a5`}\n      </button>\n      <button onClick={() => setState('bar')}>\n        {`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key\uc5d0 \"bar\"\ub370\uc774\ud130 \uc800\uc7a5`}\n      </button>\n      <button onClick={() => removeState()}>\n        {`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key \uc81c\uac70`}\n      </button>\n    </div>\n  );\n};\n"})}),"\n",(0,r.jsx)(t.h2,{id:"example",children:"Example"}),"\n","\n",(0,r.jsx)(u,{})]})}function m(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},3267:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>i});var s=n(5195);const r={},a=s.createContext(r);function o(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(a.Provider,{value:t},e.children)}},4680:(e,t,n)=>{n.d(t,{M:()=>o});var s=n(9705),r=n(2344);n(5195);const a=e=>{return!!e&&(t=e,n="current",Object.prototype.hasOwnProperty.call(t,n));var t,n};function o(e,t,n,o){const i=(0,s.p)(n);(0,r.E)((()=>{const n=a(e)?e.current:e;if(n)return n.addEventListener(t,i,o),()=>{n.removeEventListener(t,i,o)}}),[t,e,o,i])}},2344:(e,t,n)=>{n.d(t,{E:()=>a});var s=n(9185),r=n(5195);const a=(0,s.o)()?r.useLayoutEffect:r.useEffect},1138:(e,t,n)=>{n.d(t,{M:()=>p});var s=n(5948),r=n(3855),a=n(3868),o=n(5195),i=n(8742);const c="modern-kit-local-storage",l={key:c,subscribe:e=>{window.addEventListener(c,e)},unsubscribe:e=>{window.removeEventListener(c,e)},dispatchEvent:()=>{window.dispatchEvent(new StorageEvent(c))}},u=e=>{try{return window.localStorage.getItem(e)}catch{return null}},d=e=>JSON.stringify(e),h=e=>(l.subscribe(e),()=>{l.unsubscribe(e)}),m=(e,t)=>null==e?t:(0,s.O)(e),g=new r.h("localStorage");function p(e){const{key:t,visibilityChange:n=!1}=e,s="initialValue"in e?e.initialValue:null,r=(0,o.useMemo)((()=>(0,a.T)(s)?s():s),[s]),c=(0,o.useSyncExternalStore)(h,(()=>u(t)),(()=>d(r))),p=(0,o.useMemo)((()=>m(c,r)),[c,r]),S=(0,o.useCallback)((e=>{try{const n=u(t),s=m(n,r),o=(0,a.T)(e)?e(s):e;g.setItem(t,o),l.dispatchEvent()}catch(n){throw new Error(`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "${t}" key\uc5d0 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ${n}`)}}),[t,r]),y=(0,o.useCallback)((()=>{try{g.removeItem(t),l.dispatchEvent()}catch(e){throw new Error(`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "${t}" key\uc758 \ub370\uc774\ud130\ub97c \uc0ad\uc81c\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ${e}`)}}),[t]),f=(0,o.useCallback)((()=>{l.dispatchEvent()}),[]);return(0,i.C)({onShow:f,enabled:n}),{state:p,setState:S,removeState:y}}},9705:(e,t,n)=>{n.d(t,{p:()=>r});var s=n(5195);function r(e){const t=(0,s.useRef)(e);return t.current=e,(0,s.useCallback)(((...e)=>t.current(...e)),[])}},8742:(e,t,n)=>{n.d(t,{C:()=>a});var s=n(6547),r=n(4680);n(5195);function a({onShow:e=s.l,onHide:t=s.l,enabled:n=!0}={}){(0,r.M)("undefined"!=typeof document&&n?document:null,"visibilitychange",(n=>{("visible"===document.visibilityState?e:t)(n,document.visibilityState)}))}},6547:(e,t,n)=>{function s(){}n.d(t,{l:()=>s})},5948:(e,t,n)=>{function s(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){throw new Error(`Failed to parse data: ${t}`)}}n.d(t,{O:()=>s})},9185:(e,t,n)=>{n.d(t,{o:()=>r});var s=n(5301);function r(){return!(0,s.S)()}},5301:(e,t,n)=>{function s(){return"undefined"==typeof window}n.d(t,{S:()=>s})},3855:(e,t,n)=>{n.d(t,{h:()=>r});var s=n(5948);class r{constructor(e){this.storageType=e,this.managedKeys=new Set}get storage(){if("undefined"==typeof window)throw new Error("Storage\ub97c \uc9c0\uc6d0\ud558\ub294 \ud658\uacbd\uc774 \uc544\ub2d9\ub2c8\ub2e4");return window[this.storageType]}setItem(e,t){null!=t&&(this.storage.setItem(e,JSON.stringify(t)),this.managedKeys.add(e))}setItems(e){e.forEach((({key:e,value:t})=>{this.setItem(e,t)}))}getItem(e){try{const t=this.storage.getItem(e);return null==t||"undefined"===t?null:(0,s.O)(t)}catch(t){throw new Error(`"${String(e)}" \uc544\uc774\ud15c\uc744 \uac00\uc838\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ${t}`)}}getItems(e){return e.map((e=>({key:e,value:this.getItem(e)})))}removeItem(e){this.storage.removeItem(e),this.managedKeys.delete(e)}removeItems(e){e.forEach((e=>{this.removeItem(e)}))}hasItem(e){return null!=this.getItem(e)}keys(){const e=[];for(let t=0;t<this.storage.length;t++){const n=this.storage.key(t);n&&e.push(n)}return e}values(){return this.keys().map((e=>this.getItem(e)))}entries(){return this.keys().map((e=>[e,this.getItem(e)]))}clear(){this.storage.clear()}size(){return this.storage.length}ownKeys(){return Array.from(this.managedKeys)}ownValues(){return Array.from(this.managedKeys).map((e=>this.getItem(e)))}ownEntries(){return Array.from(this.managedKeys).map((e=>[e,this.getItem(e)]))}ownClear(){this.ownKeys().forEach((e=>{this.storage.removeItem(e)})),this.managedKeys.clear()}ownSize(){return this.managedKeys.size}}},3868:(e,t,n)=>{function s(e){return"function"==typeof e}n.d(t,{T:()=>s})}}]);