"use strict";(self.webpackChunk_modern_kit_docs=self.webpackChunk_modern_kit_docs||[]).push([[9647],{2275:(e,t,n)=>{n.r(t),n.d(t,{Example:()=>w,assets:()=>S,contentTitle:()=>m,default:()=>v,frontMatter:()=>g,metadata:()=>r,toc:()=>y});const r=JSON.parse('{"id":"react/hooks/useSessionStorage","title":"useSessionStorage","description":"React v18\ubd80\ud130 \uc9c0\uc6d0\ud558\ub294 useSyncExternalStore \uc744 \ud65c\uc6a9\ud574 \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \ub0b4\uc758 \ud2b9\uc815 key \ub370\uc774\ud130\ub97c \uad6c\ub3c5\ud558\uace0, \uad6c\ub3c5 \uc911\uc778 \ub370\uc774\ud130\uc5d0 \ubcc0\ud654\uac00 \uc788\uc744 \uc2dc \uc774\ub97c \ub3d9\uae30\ud654\ud574\uc8fc\ub294 \ucee4\uc2a4\ud140 \ud6c5\uc785\ub2c8\ub2e4.","source":"@site/docs/react/hooks/useSessionStorage.mdx","sourceDirName":"react/hooks","slug":"/react/hooks/useSessionStorage","permalink":"/modern-kit/docs/react/hooks/useSessionStorage","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"useScrollTo","permalink":"/modern-kit/docs/react/hooks/useScrollTo"},"next":{"title":"useStep","permalink":"/modern-kit/docs/react/hooks/useStep"}}');var o=n(6206),i=n(3267),s=n(9340),a=n(4382);const c="modern-kit-session-storage",l=e=>{window.addEventListener(c,e)},u=e=>{window.removeEventListener(c,e)},d=()=>{window.dispatchEvent(new StorageEvent(c))},h=e=>window.sessionStorage.getItem(e),p=e=>(l(e),()=>{u(e)});function f(e){const{key:t}=e,n="initialValue"in e?e.initialValue:null,r=(0,s.Tn)(n)?n():n,o=(0,a.useSyncExternalStore)(p,(()=>h(t)),(()=>(e=>JSON.stringify(e))(r)));return{state:(0,a.useMemo)((()=>o?(0,s.Ol)(o):r),[o,r]),setState:(0,a.useCallback)((e=>{try{const n=h(t),o=n?(0,s.Ol)(n):r,i=(0,s.Tn)(e)?e(o):e;window.sessionStorage.setItem(t,JSON.stringify(i)),d()}catch(n){throw new Error(`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "${t}" key\uc5d0 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ${n}`)}}),[t,r]),removeState:(0,a.useCallback)((()=>{try{window.sessionStorage.removeItem(t),d()}catch(e){throw new Error(`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "${t}" key\uc758 \ub370\uc774\ud130\ub97c \uc0ad\uc81c\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ${e}`)}}),[t])}}const g={},m="useSessionStorage",S={},w=()=>{const e={button:"button",div:"div",p:"p",...(0,i.R)()},{state:t,setState:n,removeState:r}=f({key:"test",initialValue:"default"});return(0,o.jsxs)(e.div,{children:[(0,o.jsx)(e.p,{children:"\uac1c\ubc1c\uc790 \ub3c4\uad6c\uc5d0\uc11c \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\uc778\ud574\ubcf4\uc138\uc694!"}),(0,o.jsxs)(e.p,{children:["state: ",t]}),(0,o.jsx)(e.button,{onClick:()=>n("foo"),children:'\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "test"key\uc5d0 "foo"\ub370\uc774\ud130 \uc800\uc7a5'}),(0,o.jsx)(e.button,{onClick:()=>n("bar"),children:'\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "test"key\uc5d0 "bar"\ub370\uc774\ud130 \uc800\uc7a5'}),(0,o.jsx)(e.button,{onClick:()=>r(),children:'\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "test"key \uc81c\uac70'})]})},y=[{value:"Code",id:"code",level:2},{value:"Interface",id:"interface",level:2},{value:"Usage",id:"usage",level:2},{value:"Example",id:"example",level:2}];function x(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"usesessionstorage",children:"useSessionStorage"})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"React v18"}),"\ubd80\ud130 \uc9c0\uc6d0\ud558\ub294 ",(0,o.jsx)(t.strong,{children:(0,o.jsx)(t.a,{href:"https://react.dev/reference/react/useSyncExternalStore",children:"useSyncExternalStore"})})," \uc744 \ud65c\uc6a9\ud574 \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \ub0b4\uc758 \ud2b9\uc815 ",(0,o.jsx)(t.code,{children:"key"})," \ub370\uc774\ud130\ub97c \uad6c\ub3c5\ud558\uace0, \uad6c\ub3c5 \uc911\uc778 \ub370\uc774\ud130\uc5d0 \ubcc0\ud654\uac00 \uc788\uc744 \uc2dc \uc774\ub97c \ub3d9\uae30\ud654\ud574\uc8fc\ub294 \ucee4\uc2a4\ud140 \ud6c5\uc785\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(t.p,{children:["\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0 \uad6c\ub3c5\ud558\uace0\uc790 \ud558\ub294 ",(0,o.jsx)(t.code,{children:"key"}),"\uac00 \uc5c6\uc744 \uacbd\uc6b0 \ubc18\ud658\ud560 ",(0,o.jsx)(t.code,{children:"initialValue"}),"\ub85c \ucd08\uae30\uac12\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub610\ud55c, ",(0,o.jsx)(t.code,{children:"\uc11c\ubc84 \uc0ac\uc774\ub4dc \ub80c\ub354\ub9c1(SSR)"}),"\uc758 \uacbd\uc6b0 \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ub3d9\uc791\ud558\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 ",(0,o.jsx)(t.code,{children:"initialValue"}),"\uac00 \ubc18\ud658\ub429\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"setState"}),"\ub294 \uac12 \uc790\uccb4\ub97c \ub118\uae38 \uc218 \uc788\uc73c\uba70, \ud568\uc218\ub3c4 \ub118\uae38 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud568\uc218\ub85c \ud65c\uc6a9 \uc2dc\uc5d0 \uc778\uc790\ub85c state\ub97c \uac00\uc838\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"const { state, setState, removeState } = useSessionStorage<number[]>({\n  key: 'test',\n  initialValue: [1, 2],\n});\n\nsetState([1, 2, 3]);\nsetState(state => [...state, 3]);\n"})}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsxs)(t.p,{children:["initialValue\ub97c \ub118\uaca8\uc8fc\uba74 \ub354\uc6b1 ",(0,o.jsx)(t.code,{children:"\uba85\ud655\ud55c \ud0c0\uc785 \ucd94\ub860"}),"\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"const { state, setState } = useSessionStorage<number[]>({\n  key: 'test',\n});\n\nstate; // number[] | null\nsetState(state => {\n  state; // number[] | null\n});\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"const { state, setState } = useSessionStorage<number[]>({\n  key: 'test',\n  initialValue: [],\n});\n\nstate; // number[]\nsetState(state => {\n  state; // number[]\n});\n"})}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.a,{href:"https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useSessionStorage/index.ts",children:"\ud83d\udd17 \uc2e4\uc81c \uad6c\ud604 \ucf54\ub4dc \ud655\uc778"})}),"\n",(0,o.jsx)(t.h2,{id:"interface",children:"Interface"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",metastring:'title="typescript"',children:"interface UseSessionStorageWithoutInitialValueProps {\n  key: string;\n}\n\ninterface UseSessionStorageWithInitialValueProps<T> {\n  key: string;\n  initialValue: T | (() => T);\n}\n\ntype UseSessionStorageProps<T> =\n  | UseSessionStorageWithoutInitialValueProps\n  | UseSessionStorageWithInitialValueProps<T>;\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"// \ud568\uc218 \uc624\ubc84\ub85c\ub529\nfunction useSessionStorage<T>({\n  key,\n  initialValue,\n}: UseSessionStorageWithInitialValueProps<T>): {\n  state: T;\n  setState: Dispatch<SetStateAction<T>>;\n  removeState: () => void;\n};\n\nfunction useSessionStorage<T = unknown>({\n  key,\n}: UseSessionStorageWithoutInitialValueProps): {\n  state: T | null;\n  setState: Dispatch<SetStateAction<T | null>>;\n  removeState: () => void;\n};\n"})}),"\n",(0,o.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",metastring:'title="typescript"',children:"import { useSessionStorage } from '@modern-kit/react';\n\nconst Example = () => {\n  const { state, setState, removeState } = useSessionStorage<string>({\n    key: 'test',\n    initialValue: 'default',\n  });\n\n  return (\n    <div>\n      <p>\uac1c\ubc1c\uc790 \ub3c4\uad6c\uc5d0\uc11c \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\uc778\ud574\ubcf4\uc138\uc694!</p>\n      <p>state: {state}</p>\n      <button onClick={() => setState('foo')}>\n        {`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key\uc5d0 \"foo\"\ub370\uc774\ud130 \uc800\uc7a5`}\n      </button>\n      <button onClick={() => setState('bar')}>\n        {`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key\uc5d0 \"bar\"\ub370\uc774\ud130 \uc800\uc7a5`}\n      </button>\n      <button onClick={() => removeState()}>\n        {`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key \uc81c\uac70`}\n      </button>\n    </div>\n  );\n};\n"})}),"\n",(0,o.jsx)(t.h2,{id:"example",children:"Example"}),"\n","\n",(0,o.jsx)(w,{})]})}function v(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(x,{...e})}):x(e)}},3267:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var r=n(4382);const o={},i=r.createContext(o);function s(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:t},e.children)}},9340:(e,t,n)=>{function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}n.d(t,{Et:()=>x,Fr:()=>a,Gp:()=>S,Ol:()=>E,Qd:()=>b,S$:()=>s,Tn:()=>w,Zp:()=>h,dK:()=>l,fl:()=>$,gD:()=>y,i5:()=>f,if:()=>p,l6:()=>k,lQ:()=>j,nS:()=>d,ni:()=>O,oc:()=>c}),"function"==typeof SuppressedError&&SuppressedError;const o={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",webp:"image/webp"};const i=(e,t)=>new Promise(((n,r)=>{e.toBlob((e=>{e?n(e):r(new Error(`Failed to create blob with format ${t}`))}),t)}));function s(){return"undefined"==typeof window}function a(){if(s())return!1;const e=window.navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|Windows Phone|BlackBerry|IEMobile|Opera Mini/i.test(e)}function c(){return!s()}function l(e){return r(this,void 0,void 0,(function*(){if(!c())throw new Error("Cannot be executed unless it is a client environment.");try{return"clipboard"in window.navigator?(yield navigator.clipboard.writeText(e),e):function(e){const t=document.createElement("textarea");t.value=e,t.style.opacity="0",document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy"),e}catch(n){throw console.error(`Failed to copy to clipboard. message: ${n.message}`),n}finally{document.body.removeChild(t)}}(e)}catch(t){throw console.error(`Failed to copy to clipboard. message: ${t.message}`),t}}))}const u=e=>r(void 0,void 0,void 0,(function*(){const t=yield fetch(e);return l(yield t.text())}));function d(e,t){var n;return r(this,void 0,void 0,(function*(){if(!c())throw new Error("Cannot be executed unless it is a client environment.");try{if(!("clipboard"in window.navigator))return u(e);if(!("write"in window.navigator.clipboard))return u(e);if(null!==(n=null==t?void 0:t.toText)&&void 0!==n&&n)return u(e);const s=yield function(e,t="png"){return new Promise(((n,s)=>{const a=new Image;a.onload=()=>r(this,void 0,void 0,(function*(){const e=document.createElement("canvas");e.width=a.width,e.height=a.height;try{const r=e.getContext("2d");if(!r)throw new Error("Failed to get 2d context");r.drawImage(a,0,0);const s=yield i(e,o[t]);n(s)}catch(r){console.error(`Failed to load image. message: ${r.mesaage}`),s(r)}})),a.onerror=()=>{s(new Error("Failed to load image"))},a.src=e}))}(e,"png");return yield navigator.clipboard.write([new ClipboardItem({[s.type]:s})]),s}catch(s){throw console.error(`Failed to copy to clipboard. message: ${s.message}`),s}}))}function h(){return r(this,void 0,void 0,(function*(){if(!c())throw new Error("Cannot be executed unless it is a client environment.");try{return yield navigator.clipboard.read()}catch(e){throw console.error(`Failed to read clipboard. message: ${e.message}`),e}}))}function p(){return r(this,void 0,void 0,(function*(){if(!c())throw new Error("Cannot be executed unless it is a client environment.");try{return yield navigator.clipboard.readText()}catch(e){throw console.error(`Failed to read clipboard. message: ${e.message}`),e}}))}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const g=(e,t,n)=>{const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(let i=0;i<r.length;i++){const s=r[i];if(!o.includes(s)||!m(e[s],t[s],n))return!1}return!0},m=(e,t,n)=>{if(e===t)return!0;if(x(e)&&x(t)&&isNaN(e)&&isNaN(t))return!0;if(w(e)&&w(t))return e.toString()===t.toString();if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return!1;if(n.has(e)&&n.get(e)===t)return!0;if(n.set(e,t),e.constructor!==t.constructor)return!1;if(e instanceof Set){if(e.size!==t.size)return!1;const r=[...e],o=[...t];return g(r,o,n)}if(e instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!t.has(r)||!m(o,t.get(r),n))return!1;return!0}return g(e,t,n)};function S(e,t){return m(e,t,new WeakMap)}function w(e){return"function"==typeof e}function y(e){return null==e}function x(e){return"number"==typeof e}function v(e){return!function(e){return Object(e)!==e}(e)}function b(e){return v(e)&&"[object Object]"===Object.prototype.toString.call(e)}function k(e){return e===window}function j(){}function E(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){throw new Error(`Failed to parse data: ${t}`)}}function C(e){return Object.keys(e)}const T={days:864e5,hours:36e5,minutes:6e4,seconds:1e3};C(T);function $(e,t){if(!c())throw new Error("Cannot be executed unless it is a client environment.");try{window[e].removeItem(t)}catch(n){throw new Error(`Failed to remove key "${t}" from ${e}: ${n}`)}}function O(e,t,n){if(!c())throw new Error("Cannot be executed unless it is a client environment.");try{const r=window[e],o=w(n)?n():n;r.setItem(t,JSON.stringify(o))}catch(r){throw new Error(`Failed to store data for key "${t}" in ${e}: ${r}`)}}}}]);