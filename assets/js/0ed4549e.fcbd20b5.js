"use strict";(self.webpackChunk_modern_kit_docs=self.webpackChunk_modern_kit_docs||[]).push([[9647],{1070:(e,t,n)=>{n.r(t),n.d(t,{Example:()=>f,assets:()=>j,contentTitle:()=>k,default:()=>b,frontMatter:()=>g,metadata:()=>s,toc:()=>y});const s=JSON.parse('{"id":"react/hooks/useSessionStorage","title":"useSessionStorage","description":"React v18\ubd80\ud130 \uc9c0\uc6d0\ud558\ub294 useSyncExternalStore \uc744 \ud65c\uc6a9\ud574 \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \ub0b4\uc758 \ud2b9\uc815 key \ub370\uc774\ud130\ub97c \uad6c\ub3c5\ud558\uace0, \uad6c\ub3c5 \uc911\uc778 \ub370\uc774\ud130\uc5d0 \ubcc0\ud654\uac00 \uc788\uc744 \uc2dc \uc774\ub97c \ub3d9\uae30\ud654\ud574\uc8fc\ub294 \ucee4\uc2a4\ud140 \ud6c5\uc785\ub2c8\ub2e4.","source":"@site/docs/react/hooks/useSessionStorage.mdx","sourceDirName":"react/hooks","slug":"/react/hooks/useSessionStorage","permalink":"/modern-kit/docs/react/hooks/useSessionStorage","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"useScrollTo","permalink":"/modern-kit/docs/react/hooks/useScrollTo"},"next":{"title":"useStateWithHistory","permalink":"/modern-kit/docs/react/hooks/useStateWithHistory"}}');var r=n(6206),o=n(3267),a=n(5948),i=n(3868),c=n(4382);const l="modern-kit-session-storage",u=e=>{window.addEventListener(l,e)},d=e=>{window.removeEventListener(l,e)},S=()=>{window.dispatchEvent(new StorageEvent(l))},h=e=>{try{return window.sessionStorage.getItem(e)}catch{return null}},p=e=>(u(e),()=>{d(e)}),m=(e,t)=>null==e?t:(0,a.O)(e);function x(e){const{key:t}=e,n="initialValue"in e?e.initialValue:null,s=(0,c.useMemo)((()=>(0,i.T)(n)?n():n),[n]),r=(0,c.useSyncExternalStore)(p,(()=>h(t)),(()=>(e=>JSON.stringify(e))(s)));return{state:(0,c.useMemo)((()=>m(r,s)),[r,s]),setState:(0,c.useCallback)((e=>{try{const n=h(t),r=m(n,s),o=(0,i.T)(e)?e(r):e;window.sessionStorage.setItem(t,JSON.stringify(o)),S()}catch(n){throw new Error(`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "${t}" key\uc5d0 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ${n}`)}}),[t,s]),removeState:(0,c.useCallback)((()=>{try{window.sessionStorage.removeItem(t),S()}catch(e){throw new Error(`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "${t}" key\uc758 \ub370\uc774\ud130\ub97c \uc0ad\uc81c\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ${e}`)}}),[t])}}const g={},k="useSessionStorage",j={},f=()=>{const e={button:"button",div:"div",p:"p",...(0,o.R)()},{state:t,setState:n,removeState:s}=x({key:"test",initialValue:"default"});return(0,r.jsxs)(e.div,{children:[(0,r.jsx)(e.p,{children:"\uac1c\ubc1c\uc790 \ub3c4\uad6c\uc5d0\uc11c \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\uc778\ud574\ubcf4\uc138\uc694!"}),(0,r.jsxs)(e.p,{children:["state: ",t]}),(0,r.jsx)(e.button,{onClick:()=>n("foo"),children:'\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "test"key\uc5d0 "foo"\ub370\uc774\ud130 \uc800\uc7a5'}),(0,r.jsx)(e.button,{onClick:()=>n("bar"),children:'\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "test"key\uc5d0 "bar"\ub370\uc774\ud130 \uc800\uc7a5'}),(0,r.jsx)(e.button,{onClick:()=>s(),children:'\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 "test"key \uc81c\uac70'})]})},y=[{value:"Code",id:"code",level:2},{value:"Interface",id:"interface",level:2},{value:"Usage",id:"usage",level:2},{value:"Example",id:"example",level:2}];function v(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"usesessionstorage",children:"useSessionStorage"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"React v18"}),"\ubd80\ud130 \uc9c0\uc6d0\ud558\ub294 ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://react.dev/reference/react/useSyncExternalStore",children:"useSyncExternalStore"})})," \uc744 \ud65c\uc6a9\ud574 \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \ub0b4\uc758 \ud2b9\uc815 ",(0,r.jsx)(t.code,{children:"key"})," \ub370\uc774\ud130\ub97c \uad6c\ub3c5\ud558\uace0, \uad6c\ub3c5 \uc911\uc778 \ub370\uc774\ud130\uc5d0 \ubcc0\ud654\uac00 \uc788\uc744 \uc2dc \uc774\ub97c \ub3d9\uae30\ud654\ud574\uc8fc\ub294 \ucee4\uc2a4\ud140 \ud6c5\uc785\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(t.p,{children:["\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0 \uad6c\ub3c5\ud558\uace0\uc790 \ud558\ub294 ",(0,r.jsx)(t.code,{children:"key"}),"\uac00 \uc5c6\uc744 \uacbd\uc6b0 \ubc18\ud658\ud560 ",(0,r.jsx)(t.code,{children:"initialValue"}),"\ub85c \ucd08\uae30\uac12\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub610\ud55c, ",(0,r.jsx)(t.code,{children:"\uc11c\ubc84 \uc0ac\uc774\ub4dc \ub80c\ub354\ub9c1(SSR)"}),"\uc758 \uacbd\uc6b0 \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ub3d9\uc791\ud558\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 ",(0,r.jsx)(t.code,{children:"initialValue"}),"\uac00 \ubc18\ud658\ub429\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"setState"}),"\ub294 \uac12 \uc790\uccb4\ub97c \ub118\uae38 \uc218 \uc788\uc73c\uba70, \ud568\uc218\ub3c4 \ub118\uae38 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud568\uc218\ub85c \ud65c\uc6a9 \uc2dc\uc5d0 \uc778\uc790\ub85c state\ub97c \uac00\uc838\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const { state, setState, removeState } = useSessionStorage<number[]>({\n  key: 'test',\n  initialValue: [1, 2],\n});\n\nsetState([1, 2, 3]);\nsetState(state => [...state, 3]);\n"})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(t.p,{children:["initialValue\ub97c \ub118\uaca8\uc8fc\uba74 \ub354\uc6b1 ",(0,r.jsx)(t.code,{children:"\uba85\ud655\ud55c \ud0c0\uc785 \ucd94\ub860"}),"\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const { state, setState } = useSessionStorage<number[]>({\n  key: 'test',\n});\n\nstate; // number[] | null\nsetState(state => {\n  state; // number[] | null\n});\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const { state, setState } = useSessionStorage<number[]>({\n  key: 'test',\n  initialValue: [],\n});\n\nstate; // number[]\nsetState(state => {\n  state; // number[]\n});\n"})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useSessionStorage/index.ts",children:"\ud83d\udd17 \uc2e4\uc81c \uad6c\ud604 \ucf54\ub4dc \ud655\uc778"})}),"\n",(0,r.jsx)(t.h2,{id:"interface",children:"Interface"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="typescript"',children:"interface UseSessionStorageWithoutInitialValueProps {\n  key: string;\n}\n\ninterface UseSessionStorageWithInitialValueProps<T> {\n  key: string;\n  initialValue: T | (() => T);\n}\n\ntype UseSessionStorageProps<T> =\n  | UseSessionStorageWithoutInitialValueProps\n  | UseSessionStorageWithInitialValueProps<T>;\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"// \ud568\uc218 \uc624\ubc84\ub85c\ub529\nfunction useSessionStorage<T>({\n  key,\n  initialValue,\n}: UseSessionStorageWithInitialValueProps<T>): {\n  state: T;\n  setState: Dispatch<SetStateAction<T>>;\n  removeState: () => void;\n};\n\nfunction useSessionStorage<T = unknown>({\n  key,\n}: UseSessionStorageWithoutInitialValueProps): {\n  state: T | null;\n  setState: Dispatch<SetStateAction<T | null>>;\n  removeState: () => void;\n};\n"})}),"\n",(0,r.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",metastring:'title="typescript"',children:"import { useSessionStorage } from '@modern-kit/react';\n\nconst Example = () => {\n  const { state, setState, removeState } = useSessionStorage<string>({\n    key: 'test',\n    initialValue: 'default',\n  });\n\n  return (\n    <div>\n      <p>\uac1c\ubc1c\uc790 \ub3c4\uad6c\uc5d0\uc11c \uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\uc778\ud574\ubcf4\uc138\uc694!</p>\n      <p>state: {state}</p>\n      <button onClick={() => setState('foo')}>\n        {`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key\uc5d0 \"foo\"\ub370\uc774\ud130 \uc800\uc7a5`}\n      </button>\n      <button onClick={() => setState('bar')}>\n        {`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key\uc5d0 \"bar\"\ub370\uc774\ud130 \uc800\uc7a5`}\n      </button>\n      <button onClick={() => removeState()}>\n        {`\uc138\uc158 \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key \uc81c\uac70`}\n      </button>\n    </div>\n  );\n};\n"})}),"\n",(0,r.jsx)(t.h2,{id:"example",children:"Example"}),"\n","\n",(0,r.jsx)(f,{})]})}function b(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(v,{...e})}):v(e)}},3267:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var s=n(4382);const r={},o=s.createContext(r);function a(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:t},e.children)}},5948:(e,t,n)=>{function s(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){throw new Error(`Failed to parse data: ${t}`)}}n.d(t,{O:()=>s})},3868:(e,t,n)=>{function s(e){return"function"==typeof e}n.d(t,{T:()=>s})}}]);