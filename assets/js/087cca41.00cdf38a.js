"use strict";(self.webpackChunk_modern_kit_docs=self.webpackChunk_modern_kit_docs||[]).push([[7168],{555:(e,t,n)=>{n.r(t),n.d(t,{Example:()=>u,assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"react/hooks/useLocalStorage","title":"useLocalStorage","description":"React v18\ubd80\ud130 \uc9c0\uc6d0\ud558\ub294 useSyncExternalStore \uc744 \ud65c\uc6a9\ud574 \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \ub0b4\uc758 \ud2b9\uc815 key \ub370\uc774\ud130\ub97c \uad6c\ub3c5\ud558\uace0, \uad6c\ub3c5 \uc911\uc778 \ub370\uc774\ud130\uc5d0 \ubcc0\ud654\uac00 \uc788\uc744 \uc2dc \uc774\ub97c \ub3d9\uae30\ud654\ud574\uc8fc\ub294 \ucee4\uc2a4\ud140 \ud6c5\uc785\ub2c8\ub2e4.","source":"@site/docs/react/hooks/useLocalStorage.mdx","sourceDirName":"react/hooks","slug":"/react/hooks/useLocalStorage","permalink":"/modern-kit/docs/react/hooks/useLocalStorage","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"useKeyDown","permalink":"/modern-kit/docs/react/hooks/useKeyDown"},"next":{"title":"useManualTimeout","permalink":"/modern-kit/docs/react/hooks/useManualTimeout"}}');var s=n(6206),o=n(3267),r=n(1138);const i={},c="useLocalStorage",l={},u=()=>{const e={button:"button",div:"div",p:"p",...(0,o.R)()},{state:t,setState:n,removeState:a}=(0,r.M)({key:"test",initialValue:"default"});return(0,s.jsxs)(e.div,{children:[(0,s.jsx)(e.p,{children:"\uac1c\ubc1c\uc790 \ub3c4\uad6c\uc5d0\uc11c \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\uc778\ud574\ubcf4\uc138\uc694!"}),(0,s.jsxs)(e.p,{children:["state: ",t]}),(0,s.jsx)(e.button,{onClick:()=>n("foo"),children:'\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "test"key\uc5d0 "foo"\ub370\uc774\ud130 \uc800\uc7a5'}),(0,s.jsx)(e.button,{onClick:()=>n("bar"),children:'\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "test"key\uc5d0 "bar"\ub370\uc774\ud130 \uc800\uc7a5'}),(0,s.jsx)(e.button,{onClick:()=>a(),children:'\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "test"key \uc81c\uac70'})]})},d=[{value:"Code",id:"code",level:2},{value:"Interface",id:"interface",level:2},{value:"Usage",id:"usage",level:2},{value:"Example",id:"example",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"uselocalstorage",children:"useLocalStorage"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"React v18"}),"\ubd80\ud130 \uc9c0\uc6d0\ud558\ub294 ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.a,{href:"https://react.dev/reference/react/useSyncExternalStore",children:"useSyncExternalStore"})})," \uc744 \ud65c\uc6a9\ud574 \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \ub0b4\uc758 \ud2b9\uc815 ",(0,s.jsx)(t.code,{children:"key"})," \ub370\uc774\ud130\ub97c \uad6c\ub3c5\ud558\uace0, \uad6c\ub3c5 \uc911\uc778 \ub370\uc774\ud130\uc5d0 \ubcc0\ud654\uac00 \uc788\uc744 \uc2dc \uc774\ub97c \ub3d9\uae30\ud654\ud574\uc8fc\ub294 \ucee4\uc2a4\ud140 \ud6c5\uc785\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(t.p,{children:["\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0 \uad6c\ub3c5\ud558\uace0\uc790 \ud558\ub294 ",(0,s.jsx)(t.code,{children:"key"}),"\uac00 \uc5c6\uc744 \uacbd\uc6b0 \ubc18\ud658\ud560 ",(0,s.jsx)(t.code,{children:"initialValue"}),"\ub85c \ucd08\uae30\uac12\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub610\ud55c, ",(0,s.jsx)(t.code,{children:"\uc11c\ubc84 \uc0ac\uc774\ub4dc \ub80c\ub354\ub9c1(SSR)"}),"\uc758 \uacbd\uc6b0 \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \ub3d9\uc791\ud558\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 ",(0,s.jsx)(t.code,{children:"initialValue"}),"\uac00 \ubc18\ud658\ub429\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"setState"}),"\ub294 \uac12 \uc790\uccb4\ub97c \ub118\uae38 \uc218 \uc788\uc73c\uba70, \ud568\uc218\ub3c4 \ub118\uae38 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud568\uc218\ub85c \ud65c\uc6a9 \uc2dc\uc5d0 \uc778\uc790\ub85c state\ub97c \uac00\uc838\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const { state, setState, removeState } = useLocalStorage<number[]>({\n  key: 'test',\n  initialValue: [1, 2],\n});\n\nsetState([1, 2, 3]);\nsetState(state => [...state, 3]);\n"})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(t.p,{children:["initialValue\ub97c \ub118\uaca8\uc8fc\uba74 \ub354\uc6b1 ",(0,s.jsx)(t.code,{children:"\uba85\ud655\ud55c \ud0c0\uc785 \ucd94\ub860"}),"\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const { state, setState } = useLocalStorage<number[]>({\n  key: 'test',\n});\n\nstate; // number[] | null\nsetState(state => {\n  state; // number[] | null\n});\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const { state, setState } = useLocalStorage<number[]>({\n  key: 'test',\n  initialValue: [],\n});\n\nstate; // number[]\nsetState(state => {\n  state; // number[]\n});\n"})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/hooks/useLocalStorage/index.ts",children:"\ud83d\udd17 \uc2e4\uc81c \uad6c\ud604 \ucf54\ub4dc \ud655\uc778"})}),"\n",(0,s.jsx)(t.h2,{id:"interface",children:"Interface"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",metastring:'title="typescript"',children:"interface UseLocalStorageWithoutInitialValueProps {\n  key: string;\n}\n\ninterface UseLocalStorageWithInitialValueProps<T> {\n  key: string;\n  initialValue: T | (() => T);\n}\n\ntype UseLocalStorageProps<T> =\n  | UseLocalStorageWithoutInitialValueProps\n  | UseLocalStorageWithInitialValueProps<T>;\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"// \ud568\uc218 \uc624\ubc84\ub85c\ub529\nfunction useLocalStorage<T>({\n  key,\n  initialValue,\n}: UseLocalStorageWithInitialValueProps<T>): {\n  state: T;\n  setState: Dispatch<SetStateAction<T>>;\n  removeState: () => void;\n};\n\nfunction useLocalStorage<T = unknown>({\n  key,\n}: UseLocalStorageWithoutInitialValueProps): {\n  state: T | null;\n  setState: Dispatch<SetStateAction<T | null>>;\n  removeState: () => void;\n};\n"})}),"\n",(0,s.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:'title="typescript"',children:"import { useLocalStorage } from '@modern-kit/react';\n\nconst Example = () => {\n  const { state, setState, removeState } = useLocalStorage<string>({\n    key: 'test',\n    initialValue: 'default',\n  });\n\n  return (\n    <div>\n      <p>\uac1c\ubc1c\uc790 \ub3c4\uad6c\uc5d0\uc11c \ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud655\uc778\ud574\ubcf4\uc138\uc694!</p>\n      <p>state: {state}</p>\n      <button onClick={() => setState('foo')}>\n        {`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key\uc5d0 \"foo\"\ub370\uc774\ud130 \uc800\uc7a5`}\n      </button>\n      <button onClick={() => setState('bar')}>\n        {`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key\uc5d0 \"bar\"\ub370\uc774\ud130 \uc800\uc7a5`}\n      </button>\n      <button onClick={() => removeState()}>\n        {`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 \"test\"key \uc81c\uac70`}\n      </button>\n    </div>\n  );\n};\n"})}),"\n",(0,s.jsx)(t.h2,{id:"example",children:"Example"}),"\n","\n",(0,s.jsx)(u,{})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},3267:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>i});var a=n(4382);const s={},o=a.createContext(s);function r(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(o.Provider,{value:t},e.children)}},1138:(e,t,n)=>{n.d(t,{M:()=>d});var a=n(3868),s=n(5948),o=n(4382);const r="modern-kit-local-storage",i={key:r,subscribe:e=>{window.addEventListener(r,e)},unsubscribe:e=>{window.removeEventListener(r,e)},dispatchEvent:()=>{window.dispatchEvent(new StorageEvent(r))}},c=e=>window.localStorage.getItem(e),l=e=>JSON.stringify(e),u=e=>(i.subscribe(e),()=>{i.unsubscribe(e)});function d(e){const{key:t}=e,n="initialValue"in e?e.initialValue:null,r=(0,a.T)(n)?n():n,d=(0,o.useSyncExternalStore)(u,(()=>c(t)),(()=>l(r)));return{state:(0,o.useMemo)((()=>d?(0,s.O)(d):r),[d,r]),setState:(0,o.useCallback)((e=>{try{const n=c(t),o=n?(0,s.O)(n):r,l=(0,a.T)(e)?e(o):e;window.localStorage.setItem(t,JSON.stringify(l)),i.dispatchEvent()}catch(n){throw new Error(`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "${t}" key\uc5d0 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ${n}`)}}),[t,r]),removeState:(0,o.useCallback)((()=>{try{window.localStorage.removeItem(t),i.dispatchEvent()}catch(e){throw new Error(`\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0 "${t}" key\uc758 \ub370\uc774\ud130\ub97c \uc0ad\uc81c\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ${e}`)}}),[t])}}},5948:(e,t,n)=>{function a(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){throw new Error(`Failed to parse data: ${t}`)}}n.d(t,{O:()=>a})},3868:(e,t,n)=>{function a(e){return"function"==typeof e}n.d(t,{T:()=>a})}}]);