"use strict";(self.webpackChunk_modern_kit_docs=self.webpackChunk_modern_kit_docs||[]).push([[5170],{98:(e,t,n)=>{n.r(t),n.d(t,{Example:()=>l,assets:()=>d,contentTitle:()=>s,default:()=>f,frontMatter:()=>a,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"react/components/LazyImage","title":"LazyImage","description":"@modern-kit/react/useIntersectionObserver \ub97c \ud65c\uc6a9\ud574 \uc774\ubbf8\uc9c0\uac00 viewport\uc5d0 \ub178\ucd9c\ub420 \ub54c \ud560\ub2f9\ub41c \uc774\ubbf8\uc9c0\ub97c Lazy Loading(\uc9c0\uc5f0 \ub85c\ub529) \ud558\ub294 \uc774\ubbf8\uc9c0 \ucef4\ud3ec\ub10c\ud2b8\uc785\ub2c8\ub2e4.","source":"@site/docs/react/components/LazyImage.mdx","sourceDirName":"react/components","slug":"/react/components/LazyImage","permalink":"/modern-kit/docs/react/components/LazyImage","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Iterator","permalink":"/modern-kit/docs/react/components/Iterator"},"next":{"title":"Mounted","permalink":"/modern-kit/docs/react/components/Mounted"}}');var o=n(6206),i=n(3267),c=n(7827);const a={},s="LazyImage",d={},l=()=>{const e={div:"div",...(0,i.R)()};return(0,o.jsxs)(e.div,{style:{background:"#f8f8f8",width:"500px"},children:[(0,o.jsx)(e.div,{style:{height:"500px",textAlign:"center",fontSize:"2rem"},children:"\uc2a4\ud06c\ub864 \ud574\uc8fc\uc138\uc694."}),(0,o.jsx)(c.o,{src:"https://github.com/Team-Grace/devgrace/assets/64779472/b5640bec-2abc-4205-afbf-ccfd9876a90b",alt:"img1",width:500,height:500}),(0,o.jsx)(e.div,{style:{width:"100%",height:"150px"}}),(0,o.jsx)(c.o,{src:"https://github.com/Team-Grace/devgrace/assets/64779472/207743a7-b29f-4826-bc08-8df0d67e568b",alt:"img2",width:500,height:500}),(0,o.jsx)(e.div,{style:{width:"100%",height:"150px"}}),(0,o.jsx)(c.o,{src:"https://github.com/Team-Grace/devgrace/assets/64779472/d1957ec8-fe87-406e-bfda-fb4ee505b152",alt:"img3",width:500,height:500})]})},u=[{value:"Code",id:"code",level:2},{value:"Interface",id:"interface",level:2},{value:"Usage",id:"usage",level:2},{value:"Example",id:"example",level:2},{value:"Note",id:"note",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"lazyimage",children:"LazyImage"})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:(0,o.jsx)(t.a,{href:"https://modern-agile-team.github.io/modern-kit/docs/react/hooks/useIntersectionObserver",children:"@modern-kit/react/useIntersectionObserver"})})," \ub97c \ud65c\uc6a9\ud574 \uc774\ubbf8\uc9c0\uac00 ",(0,o.jsx)(t.code,{children:"viewport"}),"\uc5d0 \ub178\ucd9c\ub420 \ub54c \ud560\ub2f9\ub41c \uc774\ubbf8\uc9c0\ub97c ",(0,o.jsx)(t.code,{children:"Lazy Loading(\uc9c0\uc5f0 \ub85c\ub529)"})," \ud558\ub294 \uc774\ubbf8\uc9c0 \ucef4\ud3ec\ub10c\ud2b8\uc785\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(t.p,{children:["Intersection Observer Option\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.(\ud558\ub2e8 ",(0,o.jsx)(t.code,{children:"Note"})," \ucc38\uace0)"]}),"\n",(0,o.jsxs)(t.p,{children:["\ub9cc\uc57d, \uc774\ubbf8\uc9c0 ",(0,o.jsx)(t.code,{children:"load"})," \uc911\uc5d0 ",(0,o.jsx)(t.code,{children:"\ud2b9\uc815 Fallback \ucef4\ud3ec\ub10c\ud2b8"}),"\ub97c \ub178\ucd9c\ud558\uace0 \uc2f6\ub2e4\uba74, \uc774\ub97c \uc120\uc5b8\uc801\uc73c\ub85c \ud65c\uc6a9\ud558\uae30 \uc704\ud574 ",(0,o.jsx)(t.code,{children:"LazyImage\ub97c \ud655\uc7a5"}),"\ud574\uc11c \ub9cc\ub4e0 ",(0,o.jsx)(t.strong,{children:(0,o.jsx)(t.a,{href:"https://modern-agile-team.github.io/modern-kit/docs/react/components/FallbackLazyImage",children:"FallbackLazyImage \ucef4\ud3ec\ub10c\ud2b8"})})," \uac00 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.a,{href:"https://github.com/modern-agile-team/modern-kit/blob/main/packages/react/src/components/LazyImage/index.tsx",children:"\ud83d\udd17 \uc2e4\uc81c \uad6c\ud604 \ucf54\ub4dc \ud655\uc778"})}),"\n",(0,o.jsx)(t.h2,{id:"interface",children:"Interface"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",metastring:'title="typescript"',children:"interface IntersectionObserverInit {\n  root?: Element | Document | null;\n  rootMargin?: string;\n  threshold?: number | number[];\n}\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",metastring:'title="typescript"',children:"interface LazyImageProps\n  extends React.ComponentProps<'img'>,\n    IntersectionObserverInit {\n  src: string;\n}\n\nconst LazyImage: React.ForwardRefExoticComponent<\n  Omit<LazyImageProps, 'ref'> & React.RefAttributes<HTMLImageElement>\n>;\n"})}),"\n",(0,o.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",metastring:'title="typescript"',children:"import { LazyImage } from '@modern-kit/react';\nimport img1 from '../assets/img1.png';\nimport img2 from '../assets/img2.png';\n\nconst Example = () => {\n  return (\n    <div>\n      {/* ... */}\n      <LazyImage width={400} height={400} src={img1} alt=\"img1\" />\n      {/* ... */}\n      <LazyImage width={400} height={400} src={img2} alt=\"img2\" />\n      {/* ... */}\n    </div>\n  );\n}; \n"})}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(t.h2,{id:"example",children:"Example"}),"\n","\n",(0,o.jsx)(l,{}),"\n",(0,o.jsx)(t.h2,{id:"note",children:"Note"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver",children:"Intersection Observer API"})}),"\n"]})]})}function f(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},4076:(e,t,n)=>{function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function o(e,t,n,r){return new(n||(n=Promise))((function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function a(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((r=r.apply(e,t||[])).next())}))}n.d(t,{_:()=>r,a:()=>o}),"function"==typeof SuppressedError&&SuppressedError},3267:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>a});var r=n(4382);const o={},i=r.createContext(o);function c(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),r.createElement(i.Provider,{value:t},e.children)}},7827:(e,t,n)=>{n.d(t,{o:()=>d});var r=n(4076),o=n(6206),i=n(4382),c=n(4671),a=n(2118);function s(...e){return(0,i.useCallback)((0,a.P)(...e),e)}const d=(0,i.forwardRef)(((e,t)=>{var{src:n,threshold:i,root:a,rootMargin:d}=e,l=(0,r._)(e,["src","threshold","root","rootMargin"]);const{ref:u}=(0,c.B)({onIntersectStart:e=>{e.target.src=n},calledOnce:!0,threshold:i,root:a,rootMargin:d});return(0,o.jsx)("img",Object.assign({ref:s(t,u)},l))}));d.displayName="LazyImage"},4671:(e,t,n)=>{n.d(t,{B:()=>c});var r=n(4382),o=n(9705),i=n(9340);function c({onIntersectStart:e=i.lQ,onIntersectEnd:t=i.lQ,enabled:n=!0,calledOnce:c=!1,root:a=null,threshold:s=0,rootMargin:d="0px 0px 0px 0px"}){const l=(0,r.useRef)(0),u=(0,r.useRef)(!1),h=(0,r.useRef)(null),f=(0,o.p)((([n],r)=>{if(!n)return;const o=n.target;n.isIntersecting?(u.current=!0,l.current+=1,e(n)):u.current&&(u.current=!1,l.current+=1,t(n)),c&&l.current>1&&r.unobserve(o)}));return{ref:(0,r.useCallback)((e=>{h.current&&(h.current.disconnect(),h.current=null),null!==e&&n&&(h.current=new IntersectionObserver(f,{threshold:s,root:a,rootMargin:d}),h.current.observe(e))}),[n,s,a,d,f])}}},9705:(e,t,n)=>{n.d(t,{p:()=>o});var r=n(4382);function o(e){const t=(0,r.useRef)(e);return t.current=e,(0,r.useCallback)(((...e)=>t.current(...e)),[])}},2118:(e,t,n)=>{n.d(t,{P:()=>o});var r=n(9340);const o=(...e)=>t=>e.forEach((e=>{if((0,r.Tn)(e))e(t);else if(null!=e){e.current=t}}))},9340:(e,t,n)=>{function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function a(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((r=r.apply(e,t||[])).next())}))}n.d(t,{Et:()=>v,Fr:()=>a,Gp:()=>b,Ol:()=>k,Qd:()=>j,S$:()=>c,Tn:()=>x,Zp:()=>h,dK:()=>d,fl:()=>C,gD:()=>y,i5:()=>m,if:()=>f,l6:()=>I,lQ:()=>O,nS:()=>u,ni:()=>L,oc:()=>s}),"function"==typeof SuppressedError&&SuppressedError;const o={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",webp:"image/webp"};const i=(e,t)=>new Promise(((n,r)=>{e.toBlob((e=>{e?n(e):r(new Error(`Failed to create blob with format ${t}`))}),t)}));function c(){return"undefined"==typeof window}function a(){if(c())return!1;const e=window.navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|Windows Phone|BlackBerry|IEMobile|Opera Mini/i.test(e)}function s(){return!c()}function d(e){return r(this,void 0,void 0,(function*(){if(!s())throw new Error("Cannot be executed unless it is a client environment.");try{return"clipboard"in window.navigator?(yield navigator.clipboard.writeText(e),e):function(e){const t=document.createElement("textarea");t.value=e,t.style.opacity="0",document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy"),e}catch(n){throw console.error(`Failed to copy to clipboard. message: ${n.message}`),n}finally{document.body.removeChild(t)}}(e)}catch(t){throw console.error(`Failed to copy to clipboard. message: ${t.message}`),t}}))}const l=e=>r(void 0,void 0,void 0,(function*(){const t=yield fetch(e);return d(yield t.text())}));function u(e,t){var n;return r(this,void 0,void 0,(function*(){if(!s())throw new Error("Cannot be executed unless it is a client environment.");try{if(!("clipboard"in window.navigator))return l(e);if(!("write"in window.navigator.clipboard))return l(e);if(null!==(n=null==t?void 0:t.toText)&&void 0!==n&&n)return l(e);const c=yield function(e,t="png"){return new Promise(((n,c)=>{const a=new Image;a.onload=()=>r(this,void 0,void 0,(function*(){const e=document.createElement("canvas");e.width=a.width,e.height=a.height;try{const r=e.getContext("2d");if(!r)throw new Error("Failed to get 2d context");r.drawImage(a,0,0);const c=yield i(e,o[t]);n(c)}catch(r){console.error(`Failed to load image. message: ${r.mesaage}`),c(r)}})),a.onerror=()=>{c(new Error("Failed to load image"))},a.src=e}))}(e,"png");return yield navigator.clipboard.write([new ClipboardItem({[c.type]:c})]),c}catch(c){throw console.error(`Failed to copy to clipboard. message: ${c.message}`),c}}))}function h(){return r(this,void 0,void 0,(function*(){if(!s())throw new Error("Cannot be executed unless it is a client environment.");try{return yield navigator.clipboard.read()}catch(e){throw console.error(`Failed to read clipboard. message: ${e.message}`),e}}))}function f(){return r(this,void 0,void 0,(function*(){if(!s())throw new Error("Cannot be executed unless it is a client environment.");try{return yield navigator.clipboard.readText()}catch(e){throw console.error(`Failed to read clipboard. message: ${e.message}`),e}}))}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const p=(e,t,n)=>{const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(let i=0;i<r.length;i++){const c=r[i];if(!o.includes(c)||!g(e[c],t[c],n))return!1}return!0},g=(e,t,n)=>{if(e===t)return!0;if(v(e)&&v(t)&&isNaN(e)&&isNaN(t))return!0;if(x(e)&&x(t))return e.toString()===t.toString();if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return!1;if(n.has(e)&&n.get(e)===t)return!0;if(n.set(e,t),e.constructor!==t.constructor)return!1;if(e instanceof Set){if(e.size!==t.size)return!1;const r=[...e],o=[...t];return p(r,o,n)}if(e instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!t.has(r)||!g(o,t.get(r),n))return!1;return!0}return p(e,t,n)};function b(e,t){return g(e,t,new WeakMap)}function x(e){return"function"==typeof e}function y(e){return null==e}function v(e){return"number"==typeof e}function w(e){return!function(e){return Object(e)!==e}(e)}function j(e){return w(e)&&"[object Object]"===Object.prototype.toString.call(e)}function I(e){return e===window}function O(){}function k(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){throw new Error(`Failed to parse data: ${t}`)}}function E(e){return Object.keys(e)}const z={days:864e5,hours:36e5,minutes:6e4,seconds:1e3};E(z);function C(e,t){if(!s())throw new Error("Cannot be executed unless it is a client environment.");try{window[e].removeItem(t)}catch(n){throw new Error(`Failed to remove key "${t}" from ${e}: ${n}`)}}function L(e,t,n){if(!s())throw new Error("Cannot be executed unless it is a client environment.");try{const r=window[e],o=x(n)?n():n;r.setItem(t,JSON.stringify(o))}catch(r){throw new Error(`Failed to store data for key "${t}" in ${e}: ${r}`)}}}}]);